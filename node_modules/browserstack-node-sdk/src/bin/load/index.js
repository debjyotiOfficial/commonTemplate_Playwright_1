#!/usr/bin/env node
'use strict';function a29_0x36dd(_0x31c66d,_0x418bb2){const _0x5269f3=a29_0x5269();return a29_0x36dd=function(_0x36dda8,_0x5f54bc){_0x36dda8=_0x36dda8-0x15a;let _0x2b8d87=_0x5269f3[_0x36dda8];return _0x2b8d87;},a29_0x36dd(_0x31c66d,_0x418bb2);}const a29_0xc6ecd1=a29_0x36dd;(function(_0x4cd7ac,_0x43636e){const _0x59eb83=a29_0x36dd,_0x5167d9=_0x4cd7ac();while(!![]){try{const _0x3f9102=parseInt(_0x59eb83(0x17b))/0x1*(-parseInt(_0x59eb83(0x160))/0x2)+parseInt(_0x59eb83(0x181))/0x3+-parseInt(_0x59eb83(0x173))/0x4*(parseInt(_0x59eb83(0x16e))/0x5)+-parseInt(_0x59eb83(0x16b))/0x6+-parseInt(_0x59eb83(0x18e))/0x7*(parseInt(_0x59eb83(0x170))/0x8)+-parseInt(_0x59eb83(0x198))/0x9*(parseInt(_0x59eb83(0x199))/0xa)+parseInt(_0x59eb83(0x18f))/0xb;if(_0x3f9102===_0x43636e)break;else _0x5167d9['push'](_0x5167d9['shift']());}catch(_0x2e4af9){_0x5167d9['push'](_0x5167d9['shift']());}}}(a29_0x5269,0xc70f9));function a29_0x5269(){const _0x4bd978=['UEvFj','vpmeX','ZnnmL','uOzLC','SIGTERM','CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates',',\x20forwarding\x20to\x20child\x20process...','kill','Configuration\x20path:\x20','argv','debug','80gyHYwt','stringify','aQJvs','BROWSERSTACK_USERNAME','uChjc','YgVoa','env','YYWPZ','join','../../helpers/helper','forEach','8458968HeTTjL','userName','Executing\x20load\x20test\x20with\x20arguments:\x20','86375orRudK','yMRKg','23176AUIgdq','message','qlRkP','172LqxJxG','Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','Waiting\x20for\x20child\x20process\x20to\x20exit...','\x20exited\x20with\x20code\x20','checkAndUpdateCli','nIBfY','getCliDir','DxnSU','9759vnPgAc','path','error','BROWSERSTACK_ACCESSKEY','./loadUtils','slice','1838187fapaQU','Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary','../v2/cliUtils','exit','LwWYp','Failed\x20initiating\x20load\x20test:\x20','CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','Received\x20','stack','eVIwA','VDrzc','load','BROWSERSTACK_ACCESS_KEY','1253waMjxZ','49680004GaMtqs','killed','child_process','readConfig','Error\x20loading\x20configuration:\x20','Spawning:\x20','Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.','rstch','accessKey','36oJTXdD','3130410wYOcBM','LeePc'];a29_0x5269=function(){return _0x4bd978;};return a29_0x5269();}const {spawn}=require(a29_0xc6ecd1(0x191)),path=require(a29_0xc6ecd1(0x17c)),helper=require(a29_0xc6ecd1(0x169)),CLIUtils=require(a29_0xc6ecd1(0x183)),{getLoadConfigPath,sleep}=require(a29_0xc6ecd1(0x17f)),logger=require('../../helpers/logger')['winstonLogger'];async function executeLoadTest(_0x357634){const _0x3df1a8=a29_0xc6ecd1,_0x21a56f={'VDrzc':function(_0x269fcd,_0x3dda55){return _0x269fcd(_0x3dda55);},'YYWPZ':'close','uOzLC':_0x3df1a8(0x175),'eVIwA':_0x3df1a8(0x195),'fcyZK':function(_0x22eb7b,_0x1013de){return _0x22eb7b(_0x1013de);},'DxnSU':function(_0x3c4544){return _0x3c4544();},'aQJvs':_0x3df1a8(0x174),'uChjc':function(_0x515442){return _0x515442();},'UEvFj':'Failed\x20to\x20determine\x20CLI\x20directory','YgVoa':_0x3df1a8(0x187),'MOksQ':_0x3df1a8(0x15a),'qnCdq':function(_0x47640c){return _0x47640c();},'qlRkP':_0x3df1a8(0x182),'rstch':function(_0x58a980,_0x4c7e16,_0x5ef9b9,_0x1c04cc){return _0x58a980(_0x4c7e16,_0x5ef9b9,_0x1c04cc);},'LeePc':_0x3df1a8(0x18c),'LwWYp':'inherit','nIBfY':'SIGINT','XFSIi':_0x3df1a8(0x19f),'zEHnd':'SIGQUIT','XpRtt':'SIGHUP','vpmeX':function(_0x201ba1){return _0x201ba1();},'ZnnmL':function(_0x1871e9){return _0x1871e9();}};try{const _0x328c90=process[_0x3df1a8(0x15e)][_0x3df1a8(0x180)](0x2),_0x25872f=_0x328c90[_0x3df1a8(0x180)](0x1);logger['debug'](_0x3df1a8(0x16d)+_0x25872f);let _0x2af9ed={};try{logger['debug'](_0x21a56f[_0x3df1a8(0x18a)]);const _0x3034b8={};_0x3034b8[_0x3df1a8(0x16c)]=process[_0x3df1a8(0x166)][_0x3df1a8(0x163)]||process['env']['BROWSERSTACK_USER'],_0x3034b8[_0x3df1a8(0x197)]=process['env'][_0x3df1a8(0x18d)]||process['env'][_0x3df1a8(0x17e)],_0x2af9ed=_0x3034b8;if(!_0x2af9ed[_0x3df1a8(0x16c)]||!_0x2af9ed[_0x3df1a8(0x197)]){const _0x5525d0=_0x21a56f['fcyZK'](getLoadConfigPath,_0x357634[_0x3df1a8(0x15e)]);logger['debug'](_0x3df1a8(0x15d)+_0x5525d0),_0x5525d0&&(_0x2af9ed=helper[_0x3df1a8(0x192)](_0x5525d0));}}catch(_0x196fdf){logger[_0x3df1a8(0x17d)](_0x3df1a8(0x193)+_0x196fdf[_0x3df1a8(0x171)]),logger['debug']('Error\x20details:\x20'+(_0x196fdf[_0x3df1a8(0x189)]||JSON[_0x3df1a8(0x161)](_0x196fdf))),await _0x21a56f[_0x3df1a8(0x17a)](sleep),process[_0x3df1a8(0x184)](0x1);}(!_0x2af9ed['userName']||!_0x2af9ed[_0x3df1a8(0x197)])&&(logger[_0x3df1a8(0x17d)](_0x21a56f[_0x3df1a8(0x162)]),await _0x21a56f[_0x3df1a8(0x164)](sleep),process[_0x3df1a8(0x184)](0x1));const _0x338e03=CLIUtils[_0x3df1a8(0x179)]();!_0x338e03&&(logger[_0x3df1a8(0x17d)](_0x21a56f[_0x3df1a8(0x19b)]),await _0x21a56f[_0x3df1a8(0x17a)](sleep),process[_0x3df1a8(0x184)](0x1));let _0x2ffd68=CLIUtils['getExistingCliPath'](_0x338e03);try{!_0x2ffd68?(logger[_0x3df1a8(0x15f)](_0x21a56f[_0x3df1a8(0x165)]),_0x2ffd68=await CLIUtils[_0x3df1a8(0x177)]('',_0x338e03,_0x2af9ed)):(logger[_0x3df1a8(0x15f)](_0x21a56f['MOksQ']),_0x2ffd68=await CLIUtils[_0x3df1a8(0x177)](_0x2ffd68,_0x338e03,_0x2af9ed));}catch(_0x3fa3fc){logger[_0x3df1a8(0x17d)](_0x21a56f[_0x3df1a8(0x162)]),logger[_0x3df1a8(0x15f)]('Error\x20Details:\x20'+(_0x3fa3fc[_0x3df1a8(0x189)]||JSON[_0x3df1a8(0x161)](_0x3fa3fc))),await _0x21a56f['qnCdq'](sleep),process[_0x3df1a8(0x184)](0x1);}!_0x2ffd68&&(logger['error'](_0x21a56f[_0x3df1a8(0x162)]),logger['debug'](_0x21a56f[_0x3df1a8(0x172)]),await _0x21a56f[_0x3df1a8(0x17a)](sleep),process['exit'](0x1));logger['debug'](_0x3df1a8(0x194)+_0x2ffd68+'\x20load\x20'+_0x25872f[_0x3df1a8(0x168)]('\x20'));const _0x5abfe1=_0x21a56f[_0x3df1a8(0x196)](spawn,_0x2ffd68,[_0x21a56f[_0x3df1a8(0x19a)],..._0x25872f],{'stdio':_0x21a56f[_0x3df1a8(0x185)]});let _0x2e7f53=![];const _0x5041b6=new Promise(_0x1f716b=>{const _0x2dbd00=_0x3df1a8,_0x56e296={'yMRKg':function(_0x308ab4,_0x534cf2){const _0x2af7ea=a29_0x36dd;return _0x21a56f[_0x2af7ea(0x18b)](_0x308ab4,_0x534cf2);}};_0x5abfe1['on'](_0x21a56f[_0x2dbd00(0x167)],_0x550f7f=>{const _0x1d5b52=_0x2dbd00;logger[_0x1d5b52(0x15f)](_0x2ffd68+_0x1d5b52(0x176)+_0x550f7f),_0x56e296[_0x1d5b52(0x16f)](_0x1f716b,_0x550f7f);});});[_0x21a56f[_0x3df1a8(0x178)],_0x21a56f['XFSIi'],_0x21a56f['zEHnd'],_0x21a56f['XpRtt']][_0x3df1a8(0x16a)](_0x204e9a=>{process['on'](_0x204e9a,()=>{const _0x1263b3=a29_0x36dd;if(_0x2e7f53)return;_0x2e7f53=!![],logger['debug'](_0x1263b3(0x188)+_0x204e9a+_0x1263b3(0x15b)),_0x5abfe1&&!_0x5abfe1[_0x1263b3(0x190)]&&(_0x5abfe1[_0x1263b3(0x15c)](_0x204e9a),logger['debug'](_0x21a56f[_0x1263b3(0x19e)]));});});const _0x136ff7=await _0x5041b6;await _0x21a56f[_0x3df1a8(0x19c)](sleep),process['exit'](_0x136ff7);}catch(_0x12bfa7){logger['error'](_0x3df1a8(0x186)+_0x12bfa7[_0x3df1a8(0x171)]),logger[_0x3df1a8(0x15f)]('Error\x20details:\x20'+(_0x12bfa7[_0x3df1a8(0x189)]||JSON[_0x3df1a8(0x161)](_0x12bfa7))),await _0x21a56f[_0x3df1a8(0x19d)](sleep),process[_0x3df1a8(0x184)](0x1);}}module['exports']=executeLoadTest;