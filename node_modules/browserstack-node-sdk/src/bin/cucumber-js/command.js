#!/usr/bin/env node
'use strict';const a5_0x2011a7=a5_0x23f9;(function(_0x386f88,_0x3120d3){const _0x1fc7ef=a5_0x23f9,_0xb6f222=_0x386f88();while(!![]){try{const _0x2ca8bb=parseInt(_0x1fc7ef(0x19b))/0x1+-parseInt(_0x1fc7ef(0x1bc))/0x2*(-parseInt(_0x1fc7ef(0x1c5))/0x3)+-parseInt(_0x1fc7ef(0x1b0))/0x4+-parseInt(_0x1fc7ef(0x191))/0x5+-parseInt(_0x1fc7ef(0x175))/0x6+parseInt(_0x1fc7ef(0x1c4))/0x7*(parseInt(_0x1fc7ef(0x18c))/0x8)+parseInt(_0x1fc7ef(0x172))/0x9;if(_0x2ca8bb===_0x3120d3)break;else _0xb6f222['push'](_0xb6f222['shift']());}catch(_0x16af4f){_0xb6f222['push'](_0xb6f222['shift']());}}}(a5_0x1da7,0x2b53f));const fs=require('fs'),path=require('path'),util=require(a5_0x2011a7(0x180)),logger=require(a5_0x2011a7(0x149))[a5_0x2011a7(0x19d)],{default:BrowserStackSetup}=require('../../helpers/BrowserStackSetup'),helper=require(a5_0x2011a7(0x1a0)),utilities=require(a5_0x2011a7(0x16f)),constants=require('../utils/constants'),{parallelCucumberRun}=require(a5_0x2011a7(0x19f)),TestHubHandler=require('../../helpers/testhub/testhubHandler'),testOpsHelper=require(a5_0x2011a7(0x146)),chalk=require('chalk'),PerformanceTester=require('../../helpers/performance/performance-tester'),PerformanceEvents=require(a5_0x2011a7(0x147))[a5_0x2011a7(0x188)],BrowserstackCLI=require(a5_0x2011a7(0x151)),CLIUtils=require(a5_0x2011a7(0x1b9)),TestInfo=require(a5_0x2011a7(0x181));function printCucumberStats(_0x5e063b){const _0xe00b40=a5_0x2011a7,_0x7959c0={};_0x7959c0[_0xe00b40(0x183)]=function(_0x449093,_0x4fc34c){return _0x449093>_0x4fc34c;},_0x7959c0[_0xe00b40(0x182)]=function(_0x5def81,_0x2600e8){return _0x5def81-_0x2600e8;},_0x7959c0[_0xe00b40(0x162)]=function(_0x16f4d1,_0x3d7ae7){return _0x16f4d1-_0x3d7ae7;},_0x7959c0['lcIXN']=function(_0x49c68a,_0x39c82b){return _0x49c68a>_0x39c82b;},_0x7959c0[_0xe00b40(0x197)]=function(_0x1ab02b,_0x5ab094){return _0x1ab02b>_0x5ab094;},_0x7959c0[_0xe00b40(0x1bf)]=function(_0x37e82d,_0x3b5689){return _0x37e82d>_0x3b5689;},_0x7959c0[_0xe00b40(0x193)]=function(_0x2cb6ae,_0xac16fe){return _0x2cb6ae>_0xac16fe;},_0x7959c0[_0xe00b40(0x1c3)]=function(_0x27f26d,_0x541ea4){return _0x27f26d>_0x541ea4;},_0x7959c0[_0xe00b40(0x14b)]=function(_0x17adcc,_0x50f435){return _0x17adcc+_0x50f435;},_0x7959c0[_0xe00b40(0x158)]=function(_0x341f5c,_0x455cf2){return _0x341f5c+_0x455cf2;},_0x7959c0[_0xe00b40(0x189)]=function(_0x11f3d0,_0x101c9b){return _0x11f3d0+_0x101c9b;},_0x7959c0[_0xe00b40(0x1c7)]=function(_0x5b0f6c,_0x151329){return _0x5b0f6c+_0x151329;},_0x7959c0[_0xe00b40(0x170)]=function(_0x48a7e9,_0x596a80){return _0x48a7e9+_0x596a80;},_0x7959c0[_0xe00b40(0x153)]=function(_0x103a88,_0x252a4a){return _0x103a88===_0x252a4a;},_0x7959c0[_0xe00b40(0x167)]='****\x20RESULTS\x20****';const _0x2fbd04=_0x7959c0;let _0x273261=0x0;if(_0x2fbd04[_0xe00b40(0x153)](_0x5e063b[_0xe00b40(0x17a)],0x0))return _0x273261;return console[_0xe00b40(0x159)](chalk[_0xe00b40(0x163)][_0xe00b40(0x1c8)](_0x2fbd04['XpOFF'])),_0x5e063b[_0xe00b40(0x185)](_0x38efb6=>{const _0x1da83c=_0xe00b40,_0x430dae=_0x38efb6[0x0],_0x50a7e7=_0x38efb6[0x1];helper[_0x1da83c(0x16e)]()&&console[_0x1da83c(0x159)]('\x0a'+chalk[_0x1da83c(0x163)][_0x1da83c(0x1b4)](''+helper[_0x1da83c(0x15e)](_0x430dae)));const _0x556d2b=_0x50a7e7[_0x1da83c(0x192)],_0x11f745=_0x50a7e7['steps'],_0x62f82e=_0x50a7e7[_0x1da83c(0x152)],_0x4b941d=_0x50a7e7['stepsFailed'],_0x595813=_0x50a7e7['stepsPassed'],_0x3680e4=_0x50a7e7[_0x1da83c(0x1b1)],_0x375a20=_0x50a7e7[_0x1da83c(0x15f)],_0x2274fd=_0x50a7e7[_0x1da83c(0x19e)],_0xf5dba=_0x50a7e7[_0x1da83c(0x14f)],_0x81ca8f=_0x50a7e7['stepsAmbiguous'],_0x2ee25b=_0x50a7e7['processSuccess'];let _0x36180c=_0x556d2b+_0x1da83c(0x199);const _0x25cd7e=_0x2fbd04['VhgaC'](_0x2fbd04['JUdZb'](_0x556d2b,_0x62f82e),0x0)?_0x2fbd04['UGIcP'](_0x556d2b,_0x62f82e):0x0;if(_0x2fbd04[_0x1da83c(0x183)](_0x62f82e,0x0)&&_0x2fbd04[_0x1da83c(0x183)](_0x25cd7e,0x0))_0x36180c+='\x20('+chalk[_0x1da83c(0x163)]['red'](_0x62f82e+_0x1da83c(0x1ca))+',\x20'+chalk['bold'][_0x1da83c(0x1ac)](_0x25cd7e+_0x1da83c(0x161))+')';else(_0x2fbd04['lcIXN'](_0x62f82e,0x0)||_0x2fbd04[_0x1da83c(0x197)](_0x25cd7e,0x0))&&(_0x36180c+=_0x2fbd04['VhgaC'](_0x62f82e,0x0)?'\x20('+chalk[_0x1da83c(0x163)][_0x1da83c(0x1b7)](_0x62f82e+'\x20failed')+')':'\x20('+chalk[_0x1da83c(0x163)][_0x1da83c(0x1ac)](_0x25cd7e+_0x1da83c(0x161))+')');const _0x1509f3=_0x11f745+_0x1da83c(0x169),_0x139f46=[];_0x2fbd04[_0x1da83c(0x1bf)](_0x81ca8f,0x0)&&_0x139f46[_0x1da83c(0x1ab)](''+chalk[_0x1da83c(0x163)][_0x1da83c(0x1b7)](_0x81ca8f+'\x20ambiguous'));_0x2fbd04['vqCNI'](_0x4b941d,0x0)&&_0x139f46[_0x1da83c(0x1ab)](''+chalk[_0x1da83c(0x163)][_0x1da83c(0x1b7)](_0x4b941d+_0x1da83c(0x1ca)));_0x2fbd04['tqbqF'](_0x595813,0x0)&&_0x139f46[_0x1da83c(0x1ab)](''+chalk['bold'][_0x1da83c(0x1ac)](_0x595813+_0x1da83c(0x161)));_0x2fbd04[_0x1da83c(0x197)](_0x375a20,0x0)&&_0x139f46[_0x1da83c(0x1ab)](''+chalk['bold'][_0x1da83c(0x1b4)](_0x375a20+_0x1da83c(0x17f)));_0x2fbd04[_0x1da83c(0x193)](_0x3680e4,0x0)&&_0x139f46[_0x1da83c(0x1ab)](''+chalk['bold'][_0x1da83c(0x1b5)](_0x3680e4+_0x1da83c(0x1bb)));_0x2fbd04[_0x1da83c(0x1c3)](_0x2274fd,0x0)&&_0x139f46[_0x1da83c(0x1ab)](''+chalk[_0x1da83c(0x163)][_0x1da83c(0x1b4)](_0x2274fd+_0x1da83c(0x177)));_0x2fbd04[_0x1da83c(0x1bf)](_0xf5dba,0x0)&&_0x139f46[_0x1da83c(0x1ab)](''+chalk[_0x1da83c(0x163)]['yellow'](_0xf5dba+'\x20skipped'));const _0x5e4af8=_0x2fbd04[_0x1da83c(0x14b)](_0x2fbd04[_0x1da83c(0x158)](_0x2fbd04['fbbwE'](_0x1509f3,'('),_0x139f46[_0x1da83c(0x157)](',\x20')),')');console[_0x1da83c(0x159)](_0x2fbd04[_0x1da83c(0x1c7)](_0x2fbd04['RgPwP'](_0x2fbd04['KsrUj'](_0x2fbd04[_0x1da83c(0x189)]('\x0a',_0x36180c),'\x0a'),_0x5e4af8),'\x0a')),_0x2fbd04[_0x1da83c(0x153)](_0x2ee25b,![])&&(_0x273261=0x1);}),_0x273261;}async function run(_0x30d3bf,_0x2c783e,_0x38daf7){const _0x245f00=a5_0x2011a7,_0x4e4632={'RTdLw':function(_0x921aa4,_0x1f0475){return _0x921aa4(_0x1f0475);},'dapuM':function(_0xca2082,_0x3b60a3){return _0xca2082>_0x3b60a3;},'LlIkF':_0x245f00(0x14d),'hmniB':_0x245f00(0x14c),'YBURw':_0x245f00(0x19c),'kvSgV':_0x245f00(0x17c),'zaTMJ':'@playwright/test','RXpSi':_0x245f00(0x1a7),'lLAyC':_0x245f00(0x1b2),'SGSan':function(_0x20afbf,_0x37f199){return _0x20afbf>_0x37f199;},'ViSpY':function(_0x6b058a,_0x1924cf){return _0x6b058a-_0x1924cf;},'ynhFi':function(_0x70edd,_0x127f77){return _0x70edd>=_0x127f77;},'UuePx':function(_0xf90c76,_0xb614c5){return _0xf90c76!=_0xb614c5;},'pmjFP':_0x245f00(0x184),'EOPZr':function(_0x2e3104,_0x14788c,_0xf6b0b6,_0x4f555c,_0x2b7b6d,_0x5bc34f){return _0x2e3104(_0x14788c,_0xf6b0b6,_0x4f555c,_0x2b7b6d,_0x5bc34f);}},_0x11d082=helper[_0x245f00(0x194)](_0x4e4632[_0x245f00(0x1ba)]);let _0x3e3e66=constants[_0x245f00(0x1b6)][_0x245f00(0x1c0)];global['__isPlaywrightInstalled']=!!_0x11d082,await _0x38daf7[_0x245f00(0x1a8)](_0x30d3bf);if(_0x11d082){const _0x405658=_0x4e4632[_0x245f00(0x1ad)][_0x245f00(0x148)]('|');let _0x522127=0x0;while(!![]){switch(_0x405658[_0x522127++]){case'0':_0x3e3e66=constants[_0x245f00(0x1b6)]['PLAYWRIGHT'];continue;case'1':CLIUtils[_0x245f00(0x15b)](constants[_0x245f00(0x1b6)][_0x245f00(0x1c0)],_0x3e3e66);continue;case'2':BrowserstackCLI[_0x245f00(0x190)]()[_0x245f00(0x18f)](_0x38daf7[_0x245f00(0x16a)],_0x38daf7[_0x245f00(0x195)]);continue;case'3':await BrowserstackCLI['getInstance']()[_0x245f00(0x154)]();continue;case'4':logger['debug'](_0x245f00(0x15a)+_0x11d082+_0x245f00(0x1c6));continue;}break;}}BrowserstackCLI['getInstance']()[_0x245f00(0x168)]&&(process[_0x245f00(0x18e)][_0x245f00(0x186)]=BrowserstackCLI[_0x245f00(0x190)]()['binSessionId']);helper[_0x245f00(0x176)](_0x38daf7['framework'],_0x30d3bf);!helper[_0x245f00(0x16e)]()&&await _0x38daf7['setupTCGAuth']();await helper[_0x245f00(0x14a)](_0x38daf7['config']);const _0x32504c=helper['useW3C'](_0x38daf7[_0x245f00(0x16a)]);!helper[_0x245f00(0x178)](_0x38daf7['config'][_0x245f00(0x1aa)])&&(process[_0x245f00(0x18e)]['BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML']=JSON[_0x245f00(0x18d)](_0x38daf7['config'][_0x245f00(0x1aa)]));if(!BrowserstackCLI[_0x245f00(0x190)]()[_0x245f00(0x198)]()){const _0x1c8f5e=await TestHubHandler['launchBuild'](constants[_0x245f00(0x1b6)][_0x245f00(0x1c0)],_0x38daf7);}let _0x457cb6=[];if(!helper[_0x245f00(0x16e)]()){const _0x73aba0={};_0x73aba0[_0x245f00(0x15c)]=[],_0x457cb6=helper[_0x245f00(0x1bd)](Object[_0x245f00(0x166)]({},_0x38daf7[_0x245f00(0x16a)],_0x73aba0),_0x32504c,constants[_0x245f00(0x1b6)][_0x245f00(0x1c0)]);}else _0x457cb6=helper[_0x245f00(0x1bd)](_0x38daf7[_0x245f00(0x16a)],_0x32504c,constants[_0x245f00(0x1b6)][_0x245f00(0x1c0)]);if(!_0x38daf7[_0x245f00(0x16a)])return;const _0x286692=_0x38daf7[_0x245f00(0x16a)][_0x245f00(0x1c9)]||helper[_0x245f00(0x17d)](_0x30d3bf,_0x2c783e,_0x38daf7[_0x245f00(0x16a)],constants[_0x245f00(0x1b6)][_0x245f00(0x1c0)])||0x1,_0x3f10eb={'server':helper['getHubUrl'](_0x38daf7[_0x245f00(0x16a)]),'proxySettings':_0x38daf7[_0x245f00(0x16a)][_0x245f00(0x1a9)],'maxWorkers':_0x286692,'browserStackLogLevel':_0x38daf7['config'][_0x245f00(0x15d)],'skipSessionName':_0x38daf7[_0x245f00(0x16a)][_0x245f00(0x1b8)][_0x245f00(0x160)],'skipSessionStatus':_0x38daf7[_0x245f00(0x16a)][_0x245f00(0x1b8)][_0x245f00(0x174)],'turboScaleUrl':_0x38daf7[_0x245f00(0x16a)]['turboScaleUrl']},_0x5de987=process['argv'],[_0x22f6a0,_0x8c0634]=helper[_0x245f00(0x1c1)](_0x5de987),_0x4c0f55=path[_0x245f00(0x157)](process[_0x245f00(0x164)](),_0x4e4632['lLAyC']);if(_0x4e4632['SGSan'](_0x8c0634[_0x245f00(0x17a)],0x0)){helper[_0x245f00(0x16c)](_0x4c0f55);for(let _0x5b47b1=_0x4e4632[_0x245f00(0x1ae)](_0x22f6a0[_0x245f00(0x17a)],0x1);_0x4e4632[_0x245f00(0x19a)](_0x5b47b1,0x0);_0x5b47b1--){_0x5de987['splice'](_0x22f6a0[_0x5b47b1],0x2);}}_0x4e4632[_0x245f00(0x1a4)](_0x38daf7[_0x245f00(0x16a)]['testObservability'],null)?process['env'][_0x245f00(0x14e)]=_0x38daf7[_0x245f00(0x16a)][_0x245f00(0x155)]:process[_0x245f00(0x18e)][_0x245f00(0x14e)]=_0x4e4632[_0x245f00(0x17e)];PerformanceTester[_0x245f00(0x150)](PerformanceEvents['SDK_SETUP']);let _0x3c71b2;_0x4e4632['EOPZr'](parallelCucumberRun,_0x457cb6,_0x3f10eb,_0x38daf7[_0x245f00(0x16a)],_0x5de987,_0x8c0634)[_0x245f00(0x196)](async _0x4aaae3=>{const _0x558a65=_0x245f00;PerformanceTester[_0x558a65(0x1a5)](PerformanceEvents[_0x558a65(0x1af)]),_0x3c71b2=_0x4aaae3;const _0x1b0c06=_0x4e4632[_0x558a65(0x1be)](printCucumberStats,_0x4aaae3);process[_0x558a65(0x173)]=_0x1b0c06,_0x4e4632[_0x558a65(0x17b)](_0x8c0634[_0x558a65(0x17a)],0x0)&&(logger[_0x558a65(0x1c2)](_0x4e4632['LlIkF']),helper[_0x558a65(0x1a2)](_0x4c0f55,_0x8c0634),logger['debug'](_0x4e4632[_0x558a65(0x1a1)]),helper[_0x558a65(0x156)](_0x4c0f55));})[_0x245f00(0x18b)](async()=>{const _0x7f2e1b=_0x245f00;PerformanceTester[_0x7f2e1b(0x1a5)](PerformanceEvents[_0x7f2e1b(0x1af)]),_0x38daf7['errorMessage']=helper[_0x7f2e1b(0x171)](_0x3c71b2,_0x4e4632[_0x7f2e1b(0x1b3)]),testOpsHelper[_0x7f2e1b(0x1a3)]();try{await TestHubHandler['stop'](),await BrowserstackCLI[_0x7f2e1b(0x190)]()[_0x7f2e1b(0x16b)]();}catch(_0x2e844e){logger[_0x7f2e1b(0x1c2)](_0x7f2e1b(0x16d)+util[_0x7f2e1b(0x165)](_0x2e844e));}try{const {browserstackFolderPath:_0x404c11,tcgConfigPath:_0x4f29ee}=helper[_0x7f2e1b(0x187)]();fs['unlinkSync'](_0x4f29ee),fs[_0x7f2e1b(0x179)](_0x404c11);}catch(_0x408c2d){logger[_0x7f2e1b(0x1c2)](_0x4e4632['kvSgV'],_0x408c2d);}await utilities[_0x7f2e1b(0x1a6)](_0x38daf7);});}function a5_0x23f9(_0x23f669,_0x58de65){const _0x1da79e=a5_0x1da7();return a5_0x23f9=function(_0x23f9aa,_0x288fc9){_0x23f9aa=_0x23f9aa-0x146;let _0x423054=_0x1da79e[_0x23f9aa];return _0x423054;},a5_0x23f9(_0x23f669,_0x58de65);}module[a5_0x2011a7(0x18a)]=run;function a5_0x1da7(){const _0x426323=['3dKZsUo','\x20for\x20cucumber-js\x20flow','KsrUj','bgWhite','parallelsPerPlatform','\x20failed','../../helpers/test-observability/utils','../../helpers/performance/constants','split','../../helpers/logger','handleApp','jaKPv','Removing\x20tmp\x20directory\x20created\x20for\x20reports','Generating\x20consolidated\x20report...','BROWSERSTACK_TEST_OBSERVABILITY_YML','stepsUnknown','end','../v2/browserstackCLI','scenariosFailed','LRSsd','bootstrap','testObservability','removeDir','join','ahduj','log','Detected\x20Playwright\x20version\x20','setFrameworkDetail','platforms','logLevel','getPlatformName','stepsPending','skipSessionName','\x20passed','UGIcP','bold','cwd','format','assign','XpOFF','binSessionId','\x20steps','config','stop','createDir','Exception\x20in\x20stop\x20build\x20request\x20to\x20testhub\x20:\x20','isBrowserstackInfra','../../helpers/utilities','RgPwP','getErrorMessageFromResults','5327001tQXXwN','exitCode','skipSessionStatus','2079402FiwVoP','setUserConfigPath','\x20undefined','isUndefined','rmdirSync','length','dapuM','error\x20removing\x20tcg\x20config\x20file','getUserWorkerCount','pmjFP','\x20pending','util','../v2/TestInfo','JUdZb','VhgaC','true','forEach','BROWSERSTACK_CLI_BIN_SESSION_ID','getTCGConfigFilePaths','EVENTS','fbbwE','exports','finally','192uobaze','stringify','env','setBrowserstackConfig','getInstance','1188670xeKJTR','scenarios','tqbqF','getPackageVersion','cliConfig','then','hAzxh','isRunning','\x20scenarios','ynhFi','45807jCWolY','cucumber','winstonLogger','stepsUndefined','../test-runner','../../helpers/helper','hmniB','mergeOutputFiles','printBuildLink','UuePx','start','finalExecution','0|4|1|2|3','initialize','proxySettings','accessibilityOptions','push','green','RXpSi','ViSpY','SDK_CLEANUP','1342204tAJKhM','stepsSkipped','tmp','YBURw','yellow','cyan','FRAMEWORKS','red','testContextOptions','../v2/cliUtils','zaTMJ','\x20skipped','700086gdVPux','prepareCapabilities','RTdLw','vqCNI','CUCUMBER','parseFormatters','debug','EsSMw','31962JYkuea'];a5_0x1da7=function(){return _0x426323;};return a5_0x1da7();}