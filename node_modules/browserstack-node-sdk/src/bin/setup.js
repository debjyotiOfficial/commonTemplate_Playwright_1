#!/usr/bin/env node

const a50_0x527458=a50_0x2999;(function(_0x1d5300,_0x10a39b){const _0x34e8ea=a50_0x2999,_0x3bc33d=_0x1d5300();while(!![]){try{const _0x305db8=-parseInt(_0x34e8ea(0x1b9))/0x1*(parseInt(_0x34e8ea(0x1b5))/0x2)+parseInt(_0x34e8ea(0x199))/0x3*(-parseInt(_0x34e8ea(0x185))/0x4)+parseInt(_0x34e8ea(0x1c5))/0x5+-parseInt(_0x34e8ea(0x19e))/0x6*(parseInt(_0x34e8ea(0x18a))/0x7)+-parseInt(_0x34e8ea(0x187))/0x8+-parseInt(_0x34e8ea(0x186))/0x9+parseInt(_0x34e8ea(0x1ce))/0xa;if(_0x305db8===_0x10a39b)break;else _0x3bc33d['push'](_0x3bc33d['shift']());}catch(_0x5e9933){_0x3bc33d['push'](_0x3bc33d['shift']());}}}(a50_0x4205,0x9a394));const fs=require('fs'),helper=require(a50_0x527458(0x1b8)),utilities=require(a50_0x527458(0x18b)),yaml=require(a50_0x527458(0x1cd)),yargs=require(a50_0x527458(0x1ad)),logger=require(a50_0x527458(0x19c))[a50_0x527458(0x188)],configFileTemplate=__dirname+'/../../browserstack.yml.sample',configFileTemplatePW=__dirname+a50_0x527458(0x1be),configFile=process['cwd']()+a50_0x527458(0x1ba),packageFile=process[a50_0x527458(0x19d)]()+a50_0x527458(0x1ca),frameworks=['mocha',a50_0x527458(0x1cc),'cucumber-js','node',a50_0x527458(0x193),a50_0x527458(0x1bf),a50_0x527458(0x194)];let config;logger[a50_0x527458(0x198)](a50_0x527458(0x1cf)),createConfigurationFile(yargs[a50_0x527458(0x1cb)][a50_0x527458(0x1b7)],yargs[a50_0x527458(0x1cb)][a50_0x527458(0x1b0)],yargs[a50_0x527458(0x1cb)][a50_0x527458(0x194)]);try{sdkSetup();}catch(a50_0x482399){logger[a50_0x527458(0x18e)](a50_0x527458(0x18f)+a50_0x482399);}addScriptInPackageJson();function createConfigurationFile(_0x46e389,_0x2c95e9,_0x50dbc0=![]){const _0x297835=a50_0x527458,_0x50ee80={};_0x50ee80[_0x297835(0x1bc)]=_0x297835(0x1c3),_0x50ee80[_0x297835(0x1bb)]='YOUR_USERNAME',_0x50ee80[_0x297835(0x195)]='YOUR_ACCESS_KEY';const _0x3ed462=_0x50ee80;try{let _0x125c64=fs[_0x297835(0x1a8)](_0x50dbc0?configFileTemplatePW:configFileTemplate,_0x3ed462[_0x297835(0x1bc)]);_0x46e389&&(_0x125c64=_0x125c64['replace'](_0x3ed462[_0x297835(0x1bb)],_0x46e389)),_0x2c95e9&&(_0x125c64=_0x125c64[_0x297835(0x1a3)](_0x3ed462[_0x297835(0x195)],_0x2c95e9)),config=yaml['load'](_0x125c64),fs[_0x297835(0x1b1)](configFile,_0x125c64,_0x418304=>{const _0xc0f62c=_0x297835;_0x418304&&logger[_0xc0f62c(0x196)](_0x418304);});}catch(_0x4b0ddc){logger[_0x297835(0x196)](_0x4b0ddc);}}function addPostInstallScript(_0x534c6f,_0x28e525){const _0x3f62c9=a50_0x527458,_0xa5a9d1={};_0xa5a9d1[_0x3f62c9(0x189)]='postinstall',_0xa5a9d1[_0x3f62c9(0x19a)]=_0x3f62c9(0x1a6),_0xa5a9d1[_0x3f62c9(0x1c4)]=_0x3f62c9(0x1b3);const _0x533980=_0xa5a9d1;let _0x5cc69c=_0x534c6f[_0x533980[_0x3f62c9(0x189)]];if(_0x5cc69c&&_0x5cc69c[_0x3f62c9(0x1a5)](_0x533980['Uxvdc']))return;!_0x5cc69c?_0x5cc69c=_0x533980[_0x3f62c9(0x19a)]:_0x5cc69c+=_0x533980[_0x3f62c9(0x1c4)],_0x28e525['push']([_0x533980[_0x3f62c9(0x189)],_0x5cc69c]);}function addScriptInPackageJson(){const _0x3e162e=a50_0x527458,_0x384241={'JutEm':_0x3e162e(0x1c3),'hIRnc':function(_0x91b8e0,_0x55bdce){return _0x91b8e0<_0x55bdce;},'SqqHE':function(_0x57692f,_0x48ea3b,_0x32bdf5){return _0x57692f(_0x48ea3b,_0x32bdf5);},'VYtDE':function(_0x1ee1f7,_0x5a2579,_0x262031){return _0x1ee1f7(_0x5a2579,_0x262031);},'KPdqw':function(_0x307b5b,_0x3d0c16){return _0x307b5b<_0x3d0c16;},'MmDZg':function(_0xd0a8c0,_0x2f5aa2){return _0xd0a8c0!==_0x2f5aa2;},'BoJOD':_0x3e162e(0x1c6)},_0x31df18=JSON[_0x3e162e(0x1a7)](fs[_0x3e162e(0x1a8)](packageFile,_0x384241[_0x3e162e(0x1a4)])),_0x9dc9bb=[];for(let _0x4fe2bb=0x0;_0x384241[_0x3e162e(0x1ac)](_0x4fe2bb,frameworks[_0x3e162e(0x190)]);_0x4fe2bb+=0x1){const _0x3057bf=_0x384241[_0x3e162e(0x1c0)](findScriptsWithFramework,_0x31df18[_0x3e162e(0x1b4)],frameworks[_0x4fe2bb]);for(let _0x173c63=0x0;_0x384241[_0x3e162e(0x1ac)](_0x173c63,_0x3057bf[_0x3e162e(0x190)]);_0x173c63+=0x1){_0x9dc9bb[_0x3e162e(0x1d0)](_0x384241[_0x3e162e(0x1c2)](getUpdatedCommand,_0x31df18[_0x3e162e(0x1b4)],_0x3057bf[_0x173c63]));}_0x384241[_0x3e162e(0x1c0)](addPostInstallScript,_0x31df18[_0x3e162e(0x1b4)],_0x9dc9bb);}const _0x6ec79e={..._0x31df18[_0x3e162e(0x1b4)]},_0x34fa65=_0x6ec79e;for(let _0x5863f3=0x0;_0x384241[_0x3e162e(0x1c7)](_0x5863f3,_0x9dc9bb[_0x3e162e(0x190)]);_0x5863f3+=0x1){_0x34fa65[_0x9dc9bb[_0x5863f3][0x0]]=_0x9dc9bb[_0x5863f3][0x1];}_0x384241[_0x3e162e(0x191)](JSON[_0x3e162e(0x19f)](_0x31df18['scripts']),JSON['stringify'](_0x34fa65))&&(logger[_0x3e162e(0x198)](_0x384241[_0x3e162e(0x18c)]),_0x31df18[_0x3e162e(0x1b4)]=_0x34fa65,fs[_0x3e162e(0x1b1)](packageFile,JSON[_0x3e162e(0x19f)](_0x31df18,null,0x2),_0x5445c6=>{_0x5445c6&&logger['error'](_0x5445c6);}));};function a50_0x4205(){const _0x520d74=['Creating\x20configuration\x20file...','push','4FWWfNg','1646595wlGaxW','2453456EFvOmj','winstonLogger','OQfNG','553NpSaRJ','../helpers/utilities','BoJOD','SDKSetup','debug','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','length','MmDZg','FtApF','nightwatch','playwright','mbwaZ','error','split','info','943197qjqdzy','Uxvdc','Setup\x20completed','../helpers/logger','cwd','3954lnQbgj','stringify','BCaHQ','byVMq','browserstack-node-sdk','replace','JutEm','includes','npm\x20update\x20browserstack-node-sdk','parse','readFileSync','node-setup','hkWaS','entries','hIRnc','yargs','BTYGa','isUndefined','key','writeFileSync','IscOi','\x20&&\x20npm\x20update\x20browserstack-node-sdk','scripts','30vXCyOi','browserstack-node-sdk\x20','username','../helpers/helper','19016FExXBb','/browserstack.yml','zfqAb','ShoqO','-browserstack','/../../browserstack.pw.yml.sample','codeceptjs','SqqHE','fuIpE','VYtDE','utf8','IrlEn','2616905JSZhzq','Adding\x20new\x20script(s)\x20in\x20package.json...','KPdqw','indexOf','fireFunnelTestEvent','/package.json','argv','jest','js-yaml','12496560YYoYsa'];a50_0x4205=function(){return _0x520d74;};return a50_0x4205();}function findScriptsWithFramework(_0x2cab0e,_0x4e5770){const _0x3f4c9b=a50_0x527458,_0x1fa153={};_0x1fa153[_0x3f4c9b(0x1a0)]=function(_0xfe5fcb,_0x17767d){return _0xfe5fcb<_0x17767d;},_0x1fa153['hkWaS']=_0x3f4c9b(0x1a2);const _0x4ba7a1=_0x1fa153,_0x4668f6=[],_0x15b07e=Object[_0x3f4c9b(0x1ab)](_0x2cab0e);for(let _0x4f0339=0x0;_0x4ba7a1[_0x3f4c9b(0x1a0)](_0x4f0339,_0x15b07e[_0x3f4c9b(0x190)]);_0x4f0339+=0x1){_0x15b07e[_0x4f0339][0x1][_0x3f4c9b(0x1a5)](_0x4e5770)&&!_0x15b07e[_0x4f0339][0x1][_0x3f4c9b(0x1a5)](_0x4ba7a1[_0x3f4c9b(0x1aa)])&&_0x4668f6['push'](_0x15b07e[_0x4f0339][0x0]);}return _0x4668f6;}function a50_0x2999(_0xf956df,_0x22594b){const _0x4205fc=a50_0x4205();return a50_0x2999=function(_0x29992b,_0x384586){_0x29992b=_0x29992b-0x185;let _0x30760d=_0x4205fc[_0x29992b];return _0x30760d;},a50_0x2999(_0xf956df,_0x22594b);}function getUpdatedCommand(_0x44dbfb,_0x2a6436){const _0x59363f=a50_0x527458,_0x5b37c3={};_0x5b37c3['BTYGa']=function(_0x52295d,_0x2c32e5){return _0x52295d!==_0x2c32e5;},_0x5b37c3[_0x59363f(0x1b2)]=_0x59363f(0x1a2),_0x5b37c3[_0x59363f(0x1a1)]=function(_0x1841f3,_0x2b5d4e){return _0x1841f3===_0x2b5d4e;};const _0x39f1dd=_0x5b37c3,_0x3efce5=_0x2a6436+_0x59363f(0x1bd),_0x97c361=_0x44dbfb[_0x2a6436],_0x2b9d85=_0x97c361[_0x59363f(0x197)]('\x20');for(const _0x1fad3c of frameworks){if(_0x39f1dd[_0x59363f(0x1ae)](_0x2b9d85[_0x59363f(0x1c8)](_0x1fad3c),-0x1)){_0x2b9d85['splice'](_0x2b9d85[_0x59363f(0x1c8)](_0x1fad3c),0x0,_0x39f1dd['IscOi']);break;}}let _0x50457f=_0x2b9d85['join']('\x20');return _0x39f1dd[_0x59363f(0x1a1)](_0x50457f,_0x97c361)&&(_0x50457f=_0x59363f(0x1b6)+_0x97c361),[_0x3efce5,_0x50457f];}function sdkSetup(){const _0x316d97=a50_0x527458,_0x30897b={};_0x30897b[_0x316d97(0x1c1)]=_0x316d97(0x1a9),_0x30897b[_0x316d97(0x192)]=_0x316d97(0x18d);const _0x10a749=_0x30897b;if(helper[_0x316d97(0x1af)](config))return;config['source']=_0x10a749['fuIpE'];try{utilities[_0x316d97(0x1c9)](_0x10a749[_0x316d97(0x192)],{},config,'');}catch(_0x294552){logger['debug'](_0x316d97(0x18f)+_0x294552);}}logger[a50_0x527458(0x198)](a50_0x527458(0x19b));