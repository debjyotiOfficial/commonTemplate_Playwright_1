const a60_0x240383=a60_0x2cdc;(function(_0x41f6b8,_0x20801e){const _0x3a7ab4=a60_0x2cdc,_0x45ebf9=_0x41f6b8();while(!![]){try{const _0x5f28d4=parseInt(_0x3a7ab4(0x204))/0x1*(-parseInt(_0x3a7ab4(0x171))/0x2)+-parseInt(_0x3a7ab4(0x1ee))/0x3+-parseInt(_0x3a7ab4(0x195))/0x4*(parseInt(_0x3a7ab4(0x1c2))/0x5)+parseInt(_0x3a7ab4(0x1aa))/0x6+parseInt(_0x3a7ab4(0x1f6))/0x7*(parseInt(_0x3a7ab4(0x1e5))/0x8)+parseInt(_0x3a7ab4(0x1b1))/0x9+parseInt(_0x3a7ab4(0x1bf))/0xa*(parseInt(_0x3a7ab4(0x16a))/0xb);if(_0x5f28d4===_0x20801e)break;else _0x45ebf9['push'](_0x45ebf9['shift']());}catch(_0x517268){_0x45ebf9['push'](_0x45ebf9['shift']());}}}(a60_0x1be3,0x85965));function a60_0x2cdc(_0x4ddc85,_0x39ab9c){const _0x1be395=a60_0x1be3();return a60_0x2cdc=function(_0x2cdc06,_0x1c794c){_0x2cdc06=_0x2cdc06-0x14e;let _0x158310=_0x1be395[_0x2cdc06];return _0x158310;},a60_0x2cdc(_0x4ddc85,_0x39ab9c);}const fs=require('fs'),os=require('os'),url=require('url'),path=require(a60_0x240383(0x169)),{exec}=require('child_process'),{https}=require(a60_0x240383(0x1a1)),yauzl=require('yauzl'),util=require(a60_0x240383(0x1fc)),{getFrameworkVersion}=require(a60_0x240383(0x192)),{threadId}=require(a60_0x240383(0x167)),PerformanceTester=require(a60_0x240383(0x208)),{EVENTS:PerformanceEvents}=require(a60_0x240383(0x1d1)),{isNullOrEmpty,isModifiable,setReadWriteExecuteAccess}=require(a60_0x240383(0x191)),{isTrue,createDir,getHostInfo,nodeRequest,nestedKeyValue}=require('../../helpers/helper'),{BROWSERSTACK_API_URL,UPDATED_CLI_ENDPOINT}=require(a60_0x240383(0x159)),{createClassLogger}=require(a60_0x240383(0x185)),TestFrameworkInstance=require(a60_0x240383(0x183)),HookState=require('./state/hookState.js'),TestFrameworkState=require(a60_0x240383(0x1ae)),AutomationFrameworkState=require(a60_0x240383(0x1c9)),TestFrameworkConstants=require(a60_0x240383(0x1a5)),logger=createClassLogger(a60_0x240383(0x15d));function a60_0x1be3(){const _0x108533=['\x20already\x20exists','MzHHG','KStiW','./instances/testFrameworkInstance.js','debug','../../helpers/classLogger.js','test','Error\x20in\x20setting\x20up\x20cli\x20path\x20directory,\x20Exception:\x20','BJqjx','XJfrV','lazyEntries','start','platform','QeGdU','uvxMY','No\x20writable\x20directory\x20available\x20for\x20the\x20CLI','getCurrentInstanceName','../../helpers/utilities','../../helpers/test-observability/utils.js','Got\x20Error\x20in\x20percy\x20binary\x20downloading\x20request\x20','dtbLo','180PkwffZ','pBXmN','Need\x20to\x20update\x20binary,\x20current\x20binary\x20version:\x20','get','parse','Error\x20in\x20getting\x20writable\x20directory,\x20writableDir=','isDirectory','eEUZQ','filter','openReadStream','sRtvW','GET','follow-redirects','HwmmZ','EHCIp','hjmPM','./framework/constants/testFrameworkConstants.js','0|4|3|2|1','BROWSERSTACK_AUTOMATION_FRAMEWORK_DETAIL','hfqed','QrvhJ','2045508UymHfu','unix:/tmp/sdk-platform-','requestToUpdateCLI','startsWith','./state/testFrameworkState.js','arch','isFile','5980977ijoWXC','Resolved\x20binary\x20path:\x20','length','downloadLatestBinary','getWritableDir','BgMiF','shouldSkipSessionStatus','tmpdir','listen','EmgHO','shouldSkipSessionName','fYzyf','Downloading\x20SDK\x20binary\x20from:\x20','WIuZZ','40xbdpJG','error','rgmdx','88135ixqkCx','response\x20','dZKsy','OGHNR','SDK_CLI_DOWNLOAD','YjpAe','SaPpm','./state/automationFrameworkState.js','SDK_CLI_CHECK_UPDATE','getExistingCliPath','sFSWI','EeKwx','downloaded_file.zip','Setting\x20required\x20permissions\x20to\x20','matchHookRegex','../../helpers/performance/constants','ZccDq','cli_version','existsSync','statSync','Folder\x20does\x20not\x20exist:\x20','ykggJ','join','Configuring\x20Cli\x20path.','fKCCA','url','basename','development','ZOftk','SDK_CLI_BIN_PATH','stringify','homedir','rBArU','getSdkVersion','../../../package.json','15928TrJcvY','unlink','BROWSERSTACK_BINARY_URL','getCliDir','entry','readdirSync','Unable\x20to\x20set\x20required\x20permissions\x20to\x20','BROWSERSTACK_FILES_DIR','XCFbI','2866122HDpHdu','runShellCommand','isDevelopmentEnv','node','trim','setFrameworkDetail','info','uKueT','2471ElZLpx','smRcm','BROWSERSTACK_TEST_FRAMEWORK_DETAIL','binary-','pid','frZzU','util','chmod','end','UvPAM','checkAndUpdateCli','\x20version','GpEbw','data','42852TvUAxo','format','0755','XaUAh','../../helpers/performance/performance-tester.js','Current\x20CLI\x20Path\x20Found:\x20','getAutomationFrameworkDetail','cwd','QgJfp','nfjcS','mtime','vHZZe','HORpE','Failed\x20to\x20delete\x20zip\x20file:\x20','pipe','once','.sock','vupZJ','BROWSERSTACK_CLI_ENV','Got\x20Error\x20in\x20percy\x20binary\x20download\x20response\x20%s','close','../utils/constants','automationFrameworkDetail','dnpiB','TioGC','CLIUtils','fileName','getSdkLanguage','trnQw','testFrameworkDetail','WUCnK','map','gKzdJ','testContextOptions','open','worker_threads','getTestFrameworkDetail','path','4325926pnSiBN','SHELL_EXECUTE_ERROR','QKuhy','timeout','FVnEp','EXZzQ','LZlQT','46JsqZbk','skipSessionStatus','TmczF','warn','HOOK_REGEX','dWXip','cli','nFVmb','.browserstack','reduce','readEntry','env','getCLIParamsForDevEnv','Error\x20while\x20reading\x20CLI\x20path:\x20','KWUlT'];a60_0x1be3=function(){return _0x108533;};return a60_0x1be3();}class CLIUtils{[a60_0x240383(0x15a)]={};[a60_0x240383(0x161)]={};static[a60_0x240383(0x1f0)](){const _0x10dd91=a60_0x240383,_0x36ce8d={};_0x36ce8d[_0x10dd91(0x20c)]=function(_0x5047f3,_0x4fc96b){return _0x5047f3===_0x4fc96b;},_0x36ce8d[_0x10dd91(0x1a8)]=_0x10dd91(0x1dd);const _0x4e7e74=_0x36ce8d;return _0x4e7e74[_0x10dd91(0x20c)](process[_0x10dd91(0x17c)][_0x10dd91(0x156)],_0x4e7e74['hfqed']);}static[a60_0x240383(0x17d)](){const _0x4ad5f7=a60_0x240383,_0x1314db={};return _0x1314db['id']=process[_0x4ad5f7(0x17c)][_0x4ad5f7(0x156)],_0x1314db[_0x4ad5f7(0x1b9)]=_0x4ad5f7(0x1ab)+process[_0x4ad5f7(0x17c)][_0x4ad5f7(0x156)]+_0x4ad5f7(0x154),_0x1314db;}static['getSdkVersion'](){const _0x5c0632=a60_0x240383,_0x525227={'dokKJ':function(_0x578c3d,_0x32f109){return _0x578c3d(_0x32f109);},'dZKsy':_0x5c0632(0x1e4)};return _0x525227['dokKJ'](require,_0x525227[_0x5c0632(0x1c4)])['version'];}static[a60_0x240383(0x15f)](){const _0x5abd76=a60_0x240383,_0x10be72={};_0x10be72['KjcYi']=_0x5abd76(0x1f1);const _0x366452=_0x10be72;return _0x366452['KjcYi'];}static async['setupCliPath'](_0x1fd766){const _0x321248=a60_0x240383,_0x59b621={'ZVeef':_0x321248(0x1d9),'rBArU':function(_0x20beca,_0x5d76bb){return _0x20beca(_0x5d76bb);},'LZlQT':function(_0x3f0a79,_0x18e5d3){return _0x3f0a79(_0x18e5d3);},'EeKwx':_0x321248(0x18f)};logger[_0x321248(0x184)](_0x59b621['ZVeef']);const _0x1b4002=process[_0x321248(0x17c)][_0x321248(0x1df)];if(!_0x59b621[_0x321248(0x1e2)](isNullOrEmpty,_0x1b4002))return logger[_0x321248(0x184)]('Development\x20Cli\x20Path:\x20'+_0x1b4002),_0x1b4002;try{const _0x28e6e4=this[_0x321248(0x1e8)]();if(_0x59b621[_0x321248(0x170)](isNullOrEmpty,_0x28e6e4))throw new Error(_0x59b621[_0x321248(0x1cd)]);const _0x841a47=this[_0x321248(0x1cb)](_0x28e6e4),_0x15bc8e=await this[_0x321248(0x200)](_0x841a47,_0x28e6e4,_0x1fd766);return logger[_0x321248(0x184)](_0x321248(0x1b2)+_0x15bc8e),_0x15bc8e;}catch(_0x450f35){logger['debug'](_0x321248(0x187)+util[_0x321248(0x205)](_0x450f35));}return null;}static async[a60_0x240383(0x200)](_0x48c8e6,_0x546eb0,_0x3f5be0){const _0x4b7390=a60_0x240383,_0x32aef8={'sFSWI':function(_0x2967ed){return _0x2967ed();},'YjpAe':function(_0x3e8a1c,_0x3155c2){return _0x3e8a1c(_0x3155c2);},'pBXmN':function(_0x5d32bb,_0x394ff8,_0x316c28){return _0x5d32bb(_0x394ff8,_0x316c28);},'SaPpm':_0x4b7390(0x203),'kgWGd':_0x4b7390(0x1db),'vupZJ':function(_0x2da96d,_0x429ffb,_0x184492){return _0x2da96d(_0x429ffb,_0x184492);}};PerformanceTester[_0x4b7390(0x18b)](PerformanceEvents[_0x4b7390(0x1ca)]),logger[_0x4b7390(0x1f4)](_0x4b7390(0x209)+_0x48c8e6);const _0x2ae4af=_0x32aef8[_0x4b7390(0x1cc)](getHostInfo),_0x1813ff={'sdk_version':CLIUtils[_0x4b7390(0x1e3)](),'os':_0x2ae4af[_0x4b7390(0x18c)],'os_arch':_0x2ae4af[_0x4b7390(0x1af)],'cli_version':'0','sdk_language':this['getSdkLanguage']()};!_0x32aef8[_0x4b7390(0x1c7)](isNullOrEmpty,_0x48c8e6)&&(_0x1813ff[_0x4b7390(0x1d3)]=await this[_0x4b7390(0x1ef)](_0x48c8e6+_0x4b7390(0x201)));const _0x1c3ef9=await this[_0x4b7390(0x1ac)](_0x1813ff,_0x3f5be0);process[_0x4b7390(0x17c)][_0x4b7390(0x1e7)]&&(logger[_0x4b7390(0x1f4)]('Using\x20BROWSERSTACK_BINARY_URL\x20from\x20env\x20variable:\x20'+process[_0x4b7390(0x17c)][_0x4b7390(0x1e7)]),_0x1c3ef9['data'][_0x4b7390(0x1db)]=process[_0x4b7390(0x17c)]['BROWSERSTACK_BINARY_URL']);if(_0x32aef8[_0x4b7390(0x196)](nestedKeyValue,_0x1c3ef9,[_0x32aef8[_0x4b7390(0x1c8)],_0x32aef8['kgWGd']])){logger[_0x4b7390(0x184)](_0x4b7390(0x197)+_0x1813ff[_0x4b7390(0x1d3)]);const _0x117463=await this[_0x4b7390(0x1b4)](_0x32aef8[_0x4b7390(0x155)](nestedKeyValue,_0x1c3ef9,[_0x32aef8[_0x4b7390(0x1c8)],_0x32aef8['kgWGd']]),_0x546eb0);return PerformanceTester[_0x4b7390(0x1fe)](PerformanceEvents['SDK_CLI_CHECK_UPDATE']),_0x117463;}return PerformanceTester[_0x4b7390(0x1fe)](PerformanceEvents[_0x4b7390(0x1ca)]),_0x48c8e6;}static[a60_0x240383(0x1e8)](){const _0x3dfd3f=a60_0x240383,_0x10310f={'FVnEp':function(_0x535f8b,_0x1c8236){return _0x535f8b(_0x1c8236);},'fKCCA':_0x3dfd3f(0x18f),'dnpiB':_0x3dfd3f(0x177),'XCFbI':function(_0xce2cf1,_0x50bdf8){return _0xce2cf1(_0x50bdf8);}},_0x170aad=this[_0x3dfd3f(0x1b5)]();try{if(_0x10310f[_0x3dfd3f(0x16e)](isNullOrEmpty,_0x170aad))throw new Error(_0x10310f[_0x3dfd3f(0x1da)]);const _0x2a996d=path[_0x3dfd3f(0x1d8)](_0x170aad,_0x10310f[_0x3dfd3f(0x15b)]);return!fs[_0x3dfd3f(0x1d4)](_0x2a996d)&&_0x10310f[_0x3dfd3f(0x1ed)](createDir,_0x2a996d),_0x2a996d;}catch(_0x26f1e9){logger[_0x3dfd3f(0x184)](_0x3dfd3f(0x19a)+util[_0x3dfd3f(0x205)](_0x26f1e9));}}static[a60_0x240383(0x1b5)](){const _0x575560=a60_0x240383,_0x194829={'XJfrV':_0x575560(0x179),'TioGC':function(_0x56686a,_0x1eedab){return _0x56686a(_0x1eedab);},'KWUlT':function(_0x6e954,_0x1c4c91){return _0x6e954(_0x1c4c91);},'nFVmb':function(_0x1318dd,_0x393889){return _0x1318dd(_0x393889);},'ZccDq':function(_0x4670b5,_0x1d81cd){return _0x4670b5(_0x1d81cd);}},_0x316790=[process[_0x575560(0x17c)][_0x575560(0x1ec)],path[_0x575560(0x1d8)](os[_0x575560(0x1e1)](),_0x194829[_0x575560(0x189)]),path[_0x575560(0x1d8)](os[_0x575560(0x1b8)](),_0x194829['XJfrV'])];for(const _0x24e909 of _0x316790){if(_0x194829[_0x575560(0x15c)](isNullOrEmpty,_0x24e909))continue;try{if(fs['existsSync'](_0x24e909)){logger[_0x575560(0x184)]('Folder\x20'+_0x24e909+_0x575560(0x180));if(!_0x194829['TioGC'](isModifiable,_0x24e909)){logger[_0x575560(0x184)](_0x575560(0x1cf)+_0x24e909);const _0x26b785=_0x194829[_0x575560(0x15c)](setReadWriteExecuteAccess,_0x24e909);if(!_0x194829[_0x575560(0x17f)](isTrue,_0x26b785)){logger['warn'](_0x575560(0x1eb)+_0x24e909);continue;}}}else{logger[_0x575560(0x184)](_0x575560(0x1d6)+_0x24e909),_0x194829[_0x575560(0x178)](createDir,_0x24e909),logger[_0x575560(0x184)](_0x575560(0x1cf)+_0x24e909);const _0x39c11b=_0x194829[_0x575560(0x1d2)](setReadWriteExecuteAccess,_0x24e909);!_0x194829[_0x575560(0x1d2)](isTrue,_0x39c11b)&&logger[_0x575560(0x174)](_0x575560(0x1eb)+_0x24e909);}return _0x24e909;}catch(_0x24656a){logger[_0x575560(0x1c0)]('Unable\x20to\x20get\x20writable\x20directory,\x20exception\x20'+util['format'](_0x24656a));}}return null;}static[a60_0x240383(0x1cb)](_0x3b20ba){const _0x46c673=a60_0x240383,_0x32749c={};_0x32749c[_0x46c673(0x150)]=function(_0x2e73f0,_0xb081eb){return _0x2e73f0>_0xb081eb;},_0x32749c[_0x46c673(0x18d)]=function(_0x13ad7d,_0x4f9345){return _0x13ad7d>_0x4f9345;};const _0x5af7af=_0x32749c;try{if(!fs['existsSync'](_0x3b20ba)||!fs[_0x46c673(0x1d5)](_0x3b20ba)[_0x46c673(0x19b)]())return'';const _0xd09f11=fs[_0x46c673(0x1ea)](_0x3b20ba)[_0x46c673(0x163)](_0x2de00a=>path[_0x46c673(0x1d8)](_0x3b20ba,_0x2de00a))[_0x46c673(0x19d)](_0x1a0f95=>fs[_0x46c673(0x1d5)](_0x1a0f95)[_0x46c673(0x1b0)]()&&path[_0x46c673(0x1dc)](_0x1a0f95)[_0x46c673(0x1ad)](_0x46c673(0x1f9)));if(_0x5af7af[_0x46c673(0x18d)](_0xd09f11[_0x46c673(0x1b3)],0x0)){const _0x5233db=_0xd09f11['map'](_0x5ac447=>({'filePath':_0x5ac447,'mtime':fs['statSync'](_0x5ac447)[_0x46c673(0x14e)]}))[_0x46c673(0x17a)]((_0x353d4d,_0x4ce9c1)=>{const _0x3f61fa=_0x46c673;if(!_0x353d4d||!_0x353d4d['mtime'])return _0x4ce9c1;if(_0x5af7af[_0x3f61fa(0x150)](_0x4ce9c1[_0x3f61fa(0x14e)],_0x353d4d['mtime']))return _0x4ce9c1;return _0x353d4d;},{});return _0x5233db?_0x5233db['filePath']:'';}return'';}catch(_0x53a73d){return logger[_0x46c673(0x1c0)](_0x46c673(0x17e)+util[_0x46c673(0x205)](_0x53a73d)),'';}}static [a60_0x240383(0x1ac)]=async(_0x2802e4,_0x8b0e8)=>{const _0x39ce38=a60_0x240383,_0x22c956={'XBjrZ':function(_0x1b320c,_0x304095,_0x5709a8,_0x591329,_0x4d24e4,_0x3a4c55){return _0x1b320c(_0x304095,_0x5709a8,_0x591329,_0x4d24e4,_0x3a4c55);},'TmczF':_0x39ce38(0x1a0)},_0x4d995b={};_0x4d995b['qs']=_0x2802e4;const _0x14c080=await _0x22c956['XBjrZ'](nodeRequest,_0x22c956[_0x39ce38(0x173)],UPDATED_CLI_ENDPOINT,_0x4d995b,_0x8b0e8,BROWSERSTACK_API_URL);return logger[_0x39ce38(0x184)](_0x39ce38(0x1c3)+JSON[_0x39ce38(0x1e0)](_0x14c080)),_0x14c080;};static[a60_0x240383(0x1ef)](_0x5886c9,_0x5268f0=''){const _0x374c36=a60_0x240383,_0x420011={'uKueT':function(_0x1aa4c2,_0x469bde){return _0x1aa4c2(_0x469bde);},'QrvhJ':_0x374c36(0x16b),'frZzU':function(_0xc28cca,_0x4ec26d){return _0xc28cca(_0x4ec26d);},'KStiW':function(_0x49f359,_0x1b62f3){return _0x49f359(_0x1b62f3);},'UvPAM':function(_0x2c8f9d,_0x1c47c3,_0x590875,_0x50e2e8){return _0x2c8f9d(_0x1c47c3,_0x590875,_0x50e2e8);},'vHZZe':_0x374c36(0x1c0)};return new Promise((_0x36de2e,_0x62a88b)=>{const _0x294138=_0x374c36,_0x519950={'EXZzQ':function(_0x5857e1,_0x21b79b){const _0x493d5c=a60_0x2cdc;return _0x420011[_0x493d5c(0x182)](_0x5857e1,_0x21b79b);},'KQfHM':_0x420011[_0x294138(0x1a9)]},_0x56c9ca={};_0x56c9ca[_0x294138(0x20b)]=_0x5268f0,_0x56c9ca[_0x294138(0x16d)]=0x1388;const _0x204b97=_0x420011[_0x294138(0x1ff)](exec,_0x5886c9,_0x56c9ca,(_0x46f5d6,_0x5495c2,_0xe6b0dd)=>{const _0x190f40=_0x294138;_0x46f5d6?_0x420011[_0x190f40(0x1f5)](_0x36de2e,_0xe6b0dd[_0x190f40(0x1f2)]()||_0x420011['QrvhJ']):_0x420011[_0x190f40(0x1fb)](_0x36de2e,_0x5495c2[_0x190f40(0x1f2)]());});_0x204b97['on'](_0x420011[_0x294138(0x14f)],()=>{const _0x393fd2=_0x294138;_0x519950[_0x393fd2(0x16f)](_0x36de2e,_0x519950['KQfHM']);});});}static ['downloadLatestBinary']=async(_0x24d28,_0x1e328b)=>{const _0x314cf6=a60_0x240383,_0x543ab7={'EHCIp':function(_0x10c4b6,_0xbfced1){return _0x10c4b6(_0xbfced1);},'QKuhy':_0x314cf6(0x157),'HwmmZ':function(_0x377ab3,_0x19cd26){return _0x377ab3(_0x19cd26);},'dWXip':'Got\x20Error\x20while\x20downloading\x20percy\x20binary\x20file\x20%s','MzHHG':_0x314cf6(0x1c0),'CbmlB':_0x314cf6(0x1ce)};PerformanceTester['start'](PerformanceEvents[_0x314cf6(0x1c6)]),logger[_0x314cf6(0x184)](_0x314cf6(0x1bd)+_0x24d28);try{const _0x5c929c=url['parse'](_0x24d28),_0x434a26=path[_0x314cf6(0x1d8)](_0x1e328b,_0x543ab7['CbmlB']),_0x3267c6=fs['createWriteStream'](_0x434a26);return new Promise((_0xd7c0a7,_0xe1641e)=>{const _0x5f2b03=_0x314cf6,_0x11da13={'VEqUy':_0x543ab7[_0x5f2b03(0x16c)],'gKzdJ':function(_0x2bc947,_0x74d40f){const _0x555a71=_0x5f2b03;return _0x543ab7[_0x555a71(0x1a2)](_0x2bc947,_0x74d40f);},'nfjcS':_0x543ab7[_0x5f2b03(0x176)],'BgMiF':_0x543ab7[_0x5f2b03(0x181)]};https[_0x5f2b03(0x198)](_0x5c929c,function(_0x1060f1){const _0x35bb84=_0x5f2b03,_0x44aee5={'uXTVo':_0x11da13['VEqUy'],'uvxMY':function(_0x126f4b,_0x3a8bbe){const _0x4f2a88=a60_0x2cdc;return _0x11da13[_0x4f2a88(0x164)](_0x126f4b,_0x3a8bbe);},'WUCnK':_0x11da13[_0x35bb84(0x20d)]},_0x2a5a94=null;_0x1060f1['pipe'](_0x3267c6),_0x1060f1['on'](_0x11da13[_0x35bb84(0x1b6)],function(_0x28354e){const _0x4a1dbd=_0x35bb84;logger[_0x4a1dbd(0x1c0)](util['format'](_0x44aee5['uXTVo'],_0x28354e)),PerformanceTester[_0x4a1dbd(0x1fe)](PerformanceEvents['SDK_CLI_DOWNLOAD'],![],util['format'](_0x28354e)),_0x44aee5['uvxMY'](_0xe1641e,_0x28354e);}),_0x3267c6['on'](_0x11da13[_0x35bb84(0x1b6)],function(_0x3bbfd5){const _0x5a3f4d=_0x35bb84;logger[_0x5a3f4d(0x1c0)](util[_0x5a3f4d(0x205)](_0x44aee5[_0x5a3f4d(0x162)],_0x3bbfd5)),PerformanceTester['end'](PerformanceEvents[_0x5a3f4d(0x1c6)],![],util[_0x5a3f4d(0x205)](_0x3bbfd5)),_0x44aee5[_0x5a3f4d(0x18e)](_0xe1641e,_0x3bbfd5);}),CLIUtils['downloadFileStream'](_0x3267c6,_0x2a5a94,_0x434a26,_0x1e328b,_0xd7c0a7,_0xe1641e),PerformanceTester['end'](PerformanceEvents[_0x35bb84(0x1c6)]);})['on'](_0x543ab7[_0x5f2b03(0x181)],function(_0x297d63){const _0x3ac11d=_0x5f2b03;logger[_0x3ac11d(0x1c0)](_0x3ac11d(0x193)+util[_0x3ac11d(0x205)](_0x297d63)),PerformanceTester[_0x3ac11d(0x1fe)](PerformanceEvents['SDK_CLI_DOWNLOAD'],![],util['format'](_0x297d63)),_0x543ab7[_0x3ac11d(0x1a3)](_0xe1641e,_0x297d63);});});}catch(_0x5a17ea){PerformanceTester[_0x314cf6(0x1fe)](PerformanceEvents[_0x314cf6(0x1c6)],![],util[_0x314cf6(0x205)](_0x5a17ea)),logger[_0x314cf6(0x184)]('Failed\x20to\x20download\x20binary,\x20Exception:\x20'+util['format'](_0x5a17ea));}};static['downloadFileStream'](_0x31d5d0,_0x57c5ad,_0x4af1a6,_0x5b0da4,_0x1967a5,_0x1d6f79){const _0x110747=a60_0x240383,_0xfaf8f7={'GpEbw':function(_0x12c49d,_0x38f2d6){return _0x12c49d(_0x38f2d6);},'XaUAh':_0x110747(0x1fe),'rgmdx':function(_0x2dadad,_0x117983){return _0x2dadad===_0x117983;},'hjmPM':_0x110747(0x206),'XhfLm':function(_0xc81e73,_0x132e13){return _0xc81e73(_0x132e13);},'ykggJ':_0x110747(0x1e9),'trnQw':'error','YguZu':function(_0x40d4aa,_0x133357){return _0x40d4aa(_0x133357);},'smRcm':_0x110747(0x158)};_0x31d5d0['on'](_0xfaf8f7[_0x110747(0x1f7)],function(){const _0x120a4d=_0x110747,_0x70c2f6={'dtbLo':function(_0x240c6b,_0x25534b){return _0xfaf8f7['YguZu'](_0x240c6b,_0x25534b);}},_0x138fb3={};_0x138fb3[_0x120a4d(0x18a)]=!![],yauzl[_0x120a4d(0x166)](_0x4af1a6,_0x138fb3,function(_0x356b95,_0x2b1a48){const _0x5f173d=_0x120a4d,_0x13e4e7={'sRtvW':function(_0x359283,_0x2697ad){const _0x4a74dd=a60_0x2cdc;return _0xfaf8f7[_0x4a74dd(0x202)](_0x359283,_0x2697ad);},'EmgHO':_0xfaf8f7[_0x5f173d(0x207)],'eEUZQ':function(_0x14c233,_0x4a6a6f){const _0x3269eb=_0x5f173d;return _0xfaf8f7[_0x3269eb(0x1c1)](_0x14c233,_0x4a6a6f);},'WIuZZ':_0xfaf8f7[_0x5f173d(0x1a4)]};_0x356b95&&_0xfaf8f7['XhfLm'](_0x1d6f79,_0x356b95),_0x2b1a48[_0x5f173d(0x17b)](),_0x2b1a48['on'](_0xfaf8f7[_0x5f173d(0x1d7)],_0x30f660=>{const _0xd302bc=_0x5f173d;!_0x57c5ad&&(_0x57c5ad=_0x30f660[_0xd302bc(0x15e)]);if(/\/$/[_0xd302bc(0x186)](_0x30f660['fileName']))_0x2b1a48[_0xd302bc(0x17b)]();else{const _0x42a1ec=fs['createWriteStream'](path[_0xd302bc(0x1d8)](_0x5b0da4,_0x30f660[_0xd302bc(0x15e)]));_0x2b1a48[_0xd302bc(0x19e)](_0x30f660,function(_0x5a11ff,_0x5a010c){const _0x32e743=_0xd302bc;_0x5a11ff&&_0x13e4e7[_0x32e743(0x19f)](_0x1d6f79,_0x356b95),_0x5a010c['on'](_0x13e4e7[_0x32e743(0x1ba)],function(){const _0x34e25e=_0x32e743;_0x42a1ec[_0x34e25e(0x158)](),_0x2b1a48[_0x34e25e(0x17b)]();}),_0x5a010c[_0x32e743(0x152)](_0x42a1ec);}),_0x13e4e7[_0xd302bc(0x19c)](_0x30f660[_0xd302bc(0x15e)],_0x57c5ad)&&_0x2b1a48[_0xd302bc(0x158)]();}}),_0x2b1a48['on'](_0xfaf8f7[_0x5f173d(0x160)],_0x446d0b=>{const _0x4366d0=_0x5f173d;_0x70c2f6[_0x4366d0(0x194)](_0x1d6f79,_0x446d0b);}),_0x2b1a48[_0x5f173d(0x153)](_0xfaf8f7[_0x5f173d(0x207)],()=>{const _0x528f7b=_0x5f173d,_0xcf803={'ZOftk':function(_0x509dea,_0xcdbb48){const _0x22e47b=a60_0x2cdc;return _0x13e4e7[_0x22e47b(0x19f)](_0x509dea,_0xcdbb48);}};fs[_0x528f7b(0x1e6)](_0x4af1a6,_0x2686c6=>{const _0x3f26f0=_0x528f7b;_0x2686c6&&logger['warn'](_0x3f26f0(0x151)+_0x4af1a6);}),fs[_0x528f7b(0x1fd)](_0x5b0da4+'/'+_0x57c5ad,_0x13e4e7[_0x528f7b(0x1be)],function(_0x3e1a2a){const _0x4eda7b=_0x528f7b;_0x3e1a2a&&_0xcf803['ZOftk'](_0x1d6f79,_0x3e1a2a),_0xcf803[_0x4eda7b(0x1de)](_0x1967a5,_0x5b0da4+'/'+_0x57c5ad);}),_0x2b1a48[_0x528f7b(0x158)]();});});});}static[a60_0x240383(0x168)](){const _0xa7584e=a60_0x240383;if(process[_0xa7584e(0x17c)][_0xa7584e(0x1f8)])return JSON[_0xa7584e(0x199)](process['env'][_0xa7584e(0x1f8)]);return this[_0xa7584e(0x161)];}static[a60_0x240383(0x20a)](){const _0x4b78c3=a60_0x240383;if(process[_0x4b78c3(0x17c)][_0x4b78c3(0x1a7)])return JSON[_0x4b78c3(0x199)](process[_0x4b78c3(0x17c)]['BROWSERSTACK_AUTOMATION_FRAMEWORK_DETAIL']);return this[_0x4b78c3(0x15a)];}static[a60_0x240383(0x1f3)](_0x449fa7,_0x117fbb){const _0x2b052a=a60_0x240383,_0x344f8a={'clDcv':_0x2b052a(0x1a6),'OGHNR':function(_0x97c3e9,_0x331a71){return _0x97c3e9||_0x331a71;},'BJqjx':function(_0x3abc04,_0xa90399){return _0x3abc04(_0xa90399);},'fYzyf':function(_0x54ea53,_0x3cfdc8){return _0x54ea53(_0x3cfdc8);}},_0x2fbf4e=_0x344f8a['clDcv']['split']('|');let _0x3d8535=0x0;while(!![]){switch(_0x2fbf4e[_0x3d8535++]){case'0':_0x344f8a[_0x2b052a(0x1c5)](!_0x449fa7,!_0x117fbb)&&logger['debug']('Test\x20or\x20Automation\x20framework\x20not\x20provided\x20testFramework='+_0x449fa7+',\x20automationFramework='+_0x117fbb);continue;case'1':process['env'][_0x2b052a(0x1f8)]=JSON[_0x2b052a(0x1e0)](this[_0x2b052a(0x161)]);continue;case'2':process['env']['BROWSERSTACK_AUTOMATION_FRAMEWORK_DETAIL']=JSON['stringify'](this[_0x2b052a(0x15a)]);continue;case'3':this[_0x2b052a(0x15a)]={'name':_0x117fbb,'version':_0x344f8a[_0x2b052a(0x188)](getFrameworkVersion,_0x117fbb)};continue;case'4':this[_0x2b052a(0x161)]={'name':_0x449fa7,'version':{[_0x449fa7]:_0x344f8a[_0x2b052a(0x1bc)](getFrameworkVersion,_0x449fa7)}};continue;}break;}}static['getHookRegistryKey'](_0x467a7c,_0x11ad2f){return _0x467a7c+':'+_0x11ad2f;}static[a60_0x240383(0x190)](){const _0x15532b=a60_0x240383;return process[_0x15532b(0x1fa)]+':'+threadId;}static[a60_0x240383(0x1bb)](_0x5dc306){const _0xa29b50=a60_0x240383;if(_0x5dc306['testContextOptions']&&_0x5dc306[_0xa29b50(0x165)]['skipSessionName'])return!![];return![];}static[a60_0x240383(0x1b7)](_0x5fed38){const _0x14e6dc=a60_0x240383;if(_0x5fed38[_0x14e6dc(0x165)]&&_0x5fed38[_0x14e6dc(0x165)][_0x14e6dc(0x172)])return!![];return![];}static[a60_0x240383(0x1d0)](_0x50c2b0){const _0x4d279d=a60_0x240383,_0x51e65c=new RegExp(TestFrameworkConstants[_0x4d279d(0x175)]);return _0x51e65c[_0x4d279d(0x186)](_0x50c2b0);}}module['exports']=CLIUtils;