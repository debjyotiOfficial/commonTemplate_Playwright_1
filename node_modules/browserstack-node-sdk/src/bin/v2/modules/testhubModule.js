const a78_0x3071e7=a78_0x1bf7;function a78_0x2992(){const _0x174e7b=['wwxBU','getTestDetails','retry','ENV_VAR','KEY_SESSION_ID','CREATE','getCurrentTestState','testFrameworkVersion','TEST','getAllData','testFrameworkName','automationSession','257848sQehYi','capabilities','QDnAr','2725814JhSwAo','../grpcClient.js','aGMzD','error','executionContext','getJwt','856996REcnjg','testSessionEvent','20CFyoUD','onAllTestEvents','POST','registerObserver','stringify','getModuleName','KEY_HUB_URL','logger','../framework/constants/testFrameworkConstants.js','base64','../TestInfo.js','values','onPageCreate','lFOLM','from','./baseModule','getTestUUID','gkHrd','result','../state/testFrameworkState.js','../../../helpers/classLogger.js','onPageCreate\x20CBTSession\x20complete\x20for\x20testId:\x20','2883IpjMOu','getCurrentHookState','bVJqf','HPMgc','../browserstackCLI.js','test','KEY_TEST_ENDED_AT','frameworkName','O11yHashedID','uuid','KEY_TEST_DEFERRED','sendTestFrameworkEvent','name','getState','sendTestFrameworkEvent\x20testId:\x20','getId','MODULE_NAME','get','\x20testState:\x20','getProcessId','1658sCGWUY','KEY_TEST_FRAMEWORK_VERSION','../../../helpers/testhub/constants','BROWSERSTACK_TESTHUB_JWT','../state/automationFrameworkState.js','onPageCreate\x20Sending\x20CBT\x20for\x20testId:\x20','instance','369sBoabR','getBuildHashedId','testInfo','frameworkVersion','getRef','forEach','split','../framework/automationFramework.js','util','__workerDetails','getTestIdentifierFromTestInfo','startedAt','1854786xMtmOd','getThreadId','testFrameworkState','\x20hookState:\x20','testhubConfig','../state/hookState.js','2795096uBjPaW','sendTestFrameworkEvent\x20complete\x20for\x20testId:\x20','bind','testId','1|2|4|5|6|0|7|3','getContext','toString','env','hookState','test_deferred','TestHubModule','workerInfo','debug','testHookState','../../../helpers/helper.js','exports','13994440gPWPhI','KEY_PLATFORM_INDEX','format','getInstance'];a78_0x2992=function(){return _0x174e7b;};return a78_0x2992();}(function(_0x470553,_0x5292c0){const _0x757f56=a78_0x1bf7,_0x3731bb=_0x470553();while(!![]){try{const _0x373be2=parseInt(_0x757f56(0xaf))/0x1+-parseInt(_0x757f56(0xdb))/0x2*(-parseInt(_0x757f56(0xc7))/0x3)+parseInt(_0x757f56(0x86))/0x4+-parseInt(_0x757f56(0xb1))/0x5*(parseInt(_0x757f56(0xee))/0x6)+-parseInt(_0x757f56(0xa9))/0x7+-parseInt(_0x757f56(0xa6))/0x8*(parseInt(_0x757f56(0xe2))/0x9)+parseInt(_0x757f56(0x96))/0xa;if(_0x373be2===_0x5292c0)break;else _0x3731bb['push'](_0x3731bb['shift']());}catch(_0x4eae5d){_0x3731bb['push'](_0x3731bb['shift']());}}}(a78_0x2992,0xc4686));const util=require(a78_0x3071e7(0xea)),BaseModule=require(a78_0x3071e7(0xc0)),{createClassLogger}=require(a78_0x3071e7(0xc5)),AutomationFramework=require(a78_0x3071e7(0xe9)),AutomationFrameworkState=require(a78_0x3071e7(0xdf)),HookState=require(a78_0x3071e7(0xf3)),TestFramework=require('../framework/testFramework.js'),TestFrameworkState=require(a78_0x3071e7(0xc4)),PlaywrightDriverModule=require('./playwrightDriverModule.js'),TestFrameworkConstants=require(a78_0x3071e7(0xb9)),GrpcClient=require(a78_0x3071e7(0xaa)),CLIUtils=require('../cliUtils.js'),TestInfo=require(a78_0x3071e7(0xbb)),testHubConstants=require(a78_0x3071e7(0xdd)),BrowserstackCLI=require(a78_0x3071e7(0xcb)),{getPlaywrightProvider}=require(a78_0x3071e7(0x94)),{getTestRunIdentifier}=require('../../playwright/reporter/pwUtils.js');class TestHubModule extends BaseModule{[a78_0x3071e7(0xb8)]=createClassLogger(a78_0x3071e7(0x90));constructor(_0x3b8ae8){const _0x54f0b6=a78_0x3071e7,_0x557275={};_0x557275[_0x54f0b6(0xc9)]=_0x54f0b6(0x8a),_0x557275[_0x54f0b6(0xa8)]=_0x54f0b6(0x90);const _0x76711b=_0x557275,_0x23a9e4=_0x76711b[_0x54f0b6(0xc9)][_0x54f0b6(0xe8)]('|');let _0x235760=0x0;while(!![]){switch(_0x23a9e4[_0x235760++]){case'0':process[_0x54f0b6(0x8d)][testHubConstants[_0x54f0b6(0x9d)][_0x54f0b6(0xde)]]=this[_0x54f0b6(0xf2)][_0x54f0b6(0xae)]();continue;case'1':super();continue;case'2':this[_0x54f0b6(0xd3)]=_0x76711b[_0x54f0b6(0xa8)];continue;case'3':BrowserstackCLI[_0x54f0b6(0xcf)]=this[_0x54f0b6(0xf2)][_0x54f0b6(0xe3)]();continue;case'4':this[_0x54f0b6(0xf2)]=_0x3b8ae8;continue;case'5':AutomationFramework[_0x54f0b6(0xb4)](AutomationFrameworkState[_0x54f0b6(0x9f)],HookState[_0x54f0b6(0xb3)],this[_0x54f0b6(0xbd)]['bind'](this));continue;case'6':Object[_0x54f0b6(0xbc)](TestFrameworkState)[_0x54f0b6(0xe7)](_0xe1f2c9=>{const _0x2762c9=_0x54f0b6;Object[_0x2762c9(0xbc)](HookState)[_0x2762c9(0xe7)](_0x3eb983=>{const _0x15024e=_0x2762c9;TestFramework[_0x15024e(0xb4)](_0xe1f2c9,_0x3eb983,this[_0x15024e(0xb2)][_0x15024e(0x88)](this));});});continue;case'7':process[_0x54f0b6(0x8d)][testHubConstants['ENV_VAR']['BROWSERSTACK_TESTHUB_UUID']]=this[_0x54f0b6(0xf2)]['getBuildHashedId']();continue;}break;}}[a78_0x3071e7(0xb6)](){const _0xf9dd03=a78_0x3071e7;return TestHubModule[_0xf9dd03(0xd7)];}[a78_0x3071e7(0xb2)](_0x3c914c){const _0x4481c7=a78_0x3071e7,_0x5914cb={};_0x5914cb[_0x4481c7(0xca)]=function(_0x33b38c,_0x3da555){return _0x33b38c===_0x3da555;};const _0x2fed0a=_0x5914cb,_0x693325=_0x3c914c[_0x4481c7(0xe1)],_0x187224=_0x693325['getCurrentTestState']();(_0x2fed0a['HPMgc'](_0x187224,TestFrameworkState[_0x4481c7(0xa2)])||CLIUtils['matchHookRegex'](_0x187224[_0x4481c7(0x8c)]()['split']('.')[0x1]))&&this[_0x4481c7(0xd2)](_0x3c914c);}async[a78_0x3071e7(0xd2)](_0x19dd3a){const _0x205e21=a78_0x3071e7,_0x88fbfc={'gkHrd':function(_0x363983,_0x2494fc,_0x49c8d3){return _0x363983(_0x2494fc,_0x49c8d3);},'wwxBU':_0x205e21(0xba)};try{const _0x4a4ca7=_0x19dd3a[_0x205e21(0xcc)]['id'],_0x649787=_0x88fbfc[_0x205e21(0xc2)](getTestRunIdentifier,_0x19dd3a[_0x205e21(0xcc)],_0x19dd3a[_0x205e21(0xc3)][_0x205e21(0x9c)]),_0xc6755f=_0x19dd3a[_0x205e21(0xe1)],_0x359bde=_0xc6755f['getContext'](),_0x24268c=_0xc6755f[_0x205e21(0xa3)]()[_0x205e21(0xd8)](_0x649787);this['logger'][_0x205e21(0x92)](_0x205e21(0xd5)+_0x4a4ca7);const {[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']]:_0x1e4450='',[TestFrameworkConstants[_0x205e21(0xdc)]]:_0x3aa80a='',[TestFrameworkConstants['KEY_TEST_STARTED_AT']]:_0x4db72b='',[TestFrameworkConstants[_0x205e21(0xcd)]]:_0x506c79=''}=_0x24268c,_0x21f441=_0xc6755f[_0x205e21(0xa0)]()[_0x205e21(0x8c)]()[_0x205e21(0xe8)]('.')[0x1],_0x5f3422=_0xc6755f[_0x205e21(0xc8)]()[_0x205e21(0x8c)]()['split']('.')[0x1],_0x36538e=global?.[_0x205e21(0xeb)]?.[_0x205e21(0x91)]?.['parallelIndex'];;const _0x410817=_0xc6755f[_0x205e21(0xe6)](),_0x10f2d2=Buffer[_0x205e21(0xbf)](JSON[_0x205e21(0xb5)](_0x24268c))['toString'](_0x88fbfc[_0x205e21(0x9a)]),_0x2db313={'hash':_0x359bde['getId'](),'threadId':_0x359bde[_0x205e21(0xef)]()[_0x205e21(0x8c)](),'processId':_0x359bde[_0x205e21(0xda)]()[_0x205e21(0x8c)]()},_0x39e549={};_0x39e549['platformIndex']=_0x36538e,_0x39e549[_0x205e21(0xa4)]=_0x1e4450,_0x39e549[_0x205e21(0xa1)]=_0x3aa80a,_0x39e549[_0x205e21(0xf0)]=_0x21f441,_0x39e549[_0x205e21(0x8e)]=_0x5f3422,_0x39e549[_0x205e21(0xed)]=_0x4db72b,_0x39e549['endedAt']=_0x506c79,_0x39e549[_0x205e21(0xd0)]=_0x410817,_0x39e549['eventJson']=_0x10f2d2,_0x39e549[_0x205e21(0xad)]=_0x2db313;const _0x4edf9c=_0x39e549,_0x1fdf57=await GrpcClient[_0x205e21(0x99)]()['testFrameworkEvent'](_0x4edf9c);this[_0x205e21(0xb8)][_0x205e21(0x92)](_0x205e21(0x87)+_0x4a4ca7+_0x205e21(0xd9)+_0x21f441+_0x205e21(0xf1)+_0x5f3422);}catch(_0x1a3712){this[_0x205e21(0xb8)][_0x205e21(0xac)]('Error\x20in\x20sendTestFrameworkEvent:\x20'+util[_0x205e21(0x98)](_0x1a3712));}}async['onPageCreate'](_0x7e2e40){const _0x2aa28d=a78_0x3071e7,_0x34b0a9={'aGMzD':function(_0x5eb4cd,_0x4e4028){return _0x5eb4cd(_0x4e4028);},'lFOLM':_0x2aa28d(0xba)};try{if(_0x7e2e40['page']){const _0x161d86=_0x7e2e40[_0x2aa28d(0xe4)][_0x2aa28d(0x89)];this[_0x2aa28d(0xb8)][_0x2aa28d(0x92)](_0x2aa28d(0xe0)+_0x161d86);const _0x73939e=TestInfo[_0x2aa28d(0xec)](_0x7e2e40[_0x2aa28d(0xe4)],_0x7e2e40[_0x2aa28d(0xe4)][_0x2aa28d(0x9c)]),_0x5b3464=TestInfo[_0x2aa28d(0xc1)](_0x73939e),_0x42711b=TestInfo[_0x2aa28d(0x9b)](_0x73939e),_0x2c1d40=_0x7e2e40[_0x2aa28d(0xe1)],_0x3d27fc=AutomationFramework[_0x2aa28d(0xd4)](_0x2c1d40,PlaywrightDriverModule[_0x2aa28d(0x97)]),_0x4d73ac=_0x42711b[TestFrameworkConstants['KEY_TEST_FRAMEWORK_NAME']],_0x55b381=_0x42711b[TestFrameworkConstants[_0x2aa28d(0xdc)]],_0x14feb7=TestFrameworkState[_0x2aa28d(0xa2)][_0x2aa28d(0x8c)]()['split']('.')[0x1],_0x4bfaac=HookState['POST'][_0x2aa28d(0x8c)]()['split']('.')[0x1],_0x16e2ab=_0x2c1d40[_0x2aa28d(0x8b)](),_0x6cf0cc=AutomationFramework['getState'](_0x2c1d40,PlaywrightDriverModule[_0x2aa28d(0xb7)],''),_0x1d25f5={'provider':_0x34b0a9[_0x2aa28d(0xab)](getPlaywrightProvider,_0x6cf0cc),'frameworkName':_0x2c1d40[_0x2aa28d(0xce)],'frameworkVersion':_0x2c1d40[_0x2aa28d(0xe5)],'frameworkSessionId':AutomationFramework[_0x2aa28d(0xd4)](_0x2c1d40,PlaywrightDriverModule[_0x2aa28d(0x9e)],''),'ref':_0x2c1d40[_0x2aa28d(0xe6)](),'hubUrl':_0x6cf0cc};let _0x1ad3f9=AutomationFramework[_0x2aa28d(0xd4)](_0x2c1d40,PlaywrightDriverModule['KEY_CAPABILITIES'],{});_0x1ad3f9=Buffer['from'](JSON['stringify'](_0x1ad3f9))[_0x2aa28d(0x8c)](_0x34b0a9[_0x2aa28d(0xbe)]);const _0x3fd41b={'hash':_0x16e2ab[_0x2aa28d(0xd6)](),'threadId':_0x16e2ab[_0x2aa28d(0xef)]()['toString'](),'processId':_0x16e2ab[_0x2aa28d(0xda)]()[_0x2aa28d(0x8c)]()},_0x27a5cd={};_0x27a5cd['platformIndex']=_0x3d27fc,_0x27a5cd['testFrameworkName']=_0x4d73ac,_0x27a5cd[_0x2aa28d(0xa1)]=_0x55b381,_0x27a5cd[_0x2aa28d(0xf0)]=_0x14feb7,_0x27a5cd[_0x2aa28d(0x93)]=_0x4bfaac,_0x27a5cd['testUuid']=_0x5b3464,_0x27a5cd[_0x2aa28d(0xa5)]=_0x1d25f5,_0x27a5cd[_0x2aa28d(0xa7)]=_0x1ad3f9,_0x27a5cd['executionContext']=_0x3fd41b;const _0x3ab3a2=_0x27a5cd;this[_0x2aa28d(0xb8)][_0x2aa28d(0x92)]('onPageCreate\x20CBTSession\x20payload:\x20'+util[_0x2aa28d(0x98)](_0x3ab3a2));const _0x3b5f5b=await GrpcClient[_0x2aa28d(0x99)]()[_0x2aa28d(0xb0)](_0x3ab3a2);this[_0x2aa28d(0xb8)][_0x2aa28d(0x92)](_0x2aa28d(0xc6)+_0x161d86);}}catch(_0x121248){this['logger'][_0x2aa28d(0xac)]('Error\x20in\x20sending\x20CBTSession:\x20'+util[_0x2aa28d(0x98)](_0x121248));}}}function a78_0x1bf7(_0x3c1611,_0x1c787c){const _0x2992ab=a78_0x2992();return a78_0x1bf7=function(_0x1bf7cf,_0xf30840){_0x1bf7cf=_0x1bf7cf-0x86;let _0x3b5dd7=_0x2992ab[_0x1bf7cf];return _0x3b5dd7;},a78_0x1bf7(_0x3c1611,_0x1c787c);}TestHubModule[a78_0x3071e7(0xd7)]='TestHubModule',TestHubModule[a78_0x3071e7(0xd1)]=a78_0x3071e7(0x8f),module[a78_0x3071e7(0x95)]=TestHubModule;