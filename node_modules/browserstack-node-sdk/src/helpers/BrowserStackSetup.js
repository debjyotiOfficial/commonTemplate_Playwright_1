const a85_0x37fcd8=a85_0x44cd;(function(_0x3ddbe9,_0x298831){const _0x21538a=a85_0x44cd,_0x55d35e=_0x3ddbe9();while(!![]){try{const _0x5f3610=parseInt(_0x21538a(0x218))/0x1+parseInt(_0x21538a(0x22c))/0x2*(parseInt(_0x21538a(0x19f))/0x3)+-parseInt(_0x21538a(0x235))/0x4*(parseInt(_0x21538a(0x1c5))/0x5)+-parseInt(_0x21538a(0x216))/0x6+parseInt(_0x21538a(0x180))/0x7+-parseInt(_0x21538a(0x1eb))/0x8*(-parseInt(_0x21538a(0x247))/0x9)+parseInt(_0x21538a(0x255))/0xa*(-parseInt(_0x21538a(0x1e4))/0xb);if(_0x5f3610===_0x298831)break;else _0x55d35e['push'](_0x55d35e['shift']());}catch(_0x94df82){_0x55d35e['push'](_0x55d35e['shift']());}}}(a85_0x8012,0x89b4f));const util=require(a85_0x37fcd8(0x244)),os=require('os'),path=require(a85_0x37fcd8(0x1e6)),{v4:uuidv4}=require('uuid'),fs=require('fs'),constants=require(a85_0x37fcd8(0x1e2)),logger=require(a85_0x37fcd8(0x16d))[a85_0x37fcd8(0x219)],fileLogger=require(a85_0x37fcd8(0x16d))['fileLogger'],{getLogDir}=require(a85_0x37fcd8(0x16d)),helper=require(a85_0x37fcd8(0x1fa)),utilities=require(a85_0x37fcd8(0x264)),percyHelper=require(a85_0x37fcd8(0x1a8)),hubAllocator=require('../hubAllocationMethods'),PerformanceTester=require('./performance/performance-tester'),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require(a85_0x37fcd8(0x212)),{setPercyFlag}=require(a85_0x37fcd8(0x17c)),TestHubHandler=require('./testhub/testhubHandler'),timeoutPromise=require(a85_0x37fcd8(0x1c3)),BrowserstackCLI=require(a85_0x37fcd8(0x204));function a85_0x44cd(_0x4d3c21,_0x33ee16){const _0x801255=a85_0x8012();return a85_0x44cd=function(_0x44cd8a,_0x13df8e){_0x44cd8a=_0x44cd8a-0x158;let _0x3e4d3b=_0x801255[_0x44cd8a];return _0x3e4d3b;},a85_0x44cd(_0x4d3c21,_0x33ee16);}function a85_0x8012(){const _0x68c592=['FRAMEWORK','race','turboScaleUrl','setCLICaps','BrowserstackHealing.init\x20method\x20timed\x20out','isAuthenticated','warn','isTrue','unhandledRejection','dKMdK','21aksLzu','Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled','AlQuz','turboScaleGridDetails','getFinalCaps','sGyAE','config','envConfig','format','./percy/utils','gyIZx','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','AI_INIT_FAILURE','Error\x20in\x20writing\x20events\x20to\x20file\x20','TCG_URL','isTurboScaleSession','SIGABRT','stopLocalBinary','wfNSl','debug','message','BROWSERSTACK_TURBOSCALE','isHealingEnabled','SIGQUIT','nhhId','TCG_DOWN','hksuL','startLocalBinary','uYwWK','Znsyi','BMaOE','captureError','testContextOptions','userName\x20or\x20accessKey\x20is\x20not\x20defined','sanitizeCaps','exitHandler','./timeoutPromise','SIGTERM','943480JJWgKy','getTurboScaleGridDetails','initialize','exceptions','getPackageVersion','BrowserstackHealing.init','setupPercy','assign','eQoFW','qlntj','bstackConfig','stop','../../package.json','ivfLF','statusCode','guwIx','Local\x20binary\x20stopped','getConfigPath','allocateHub','push','ptDNa','requireSeleniumWebdriverCheck','MRnNM','setCredentialsFromYmlConfig','false','bTOXi','Percy\x20started\x20successfully','fireFunnelTestEvent','playwright','../bin/utils/constants','localOptions','28127TlHxPz','SDK\x20run\x20started\x20with\x20id:\x20','path','setLogDir','vgJJD','No\x20config\x20provided.','sendToEDS','813560FYXeUq','finalize','WtexB','sEfbg','rleCy','then','../ai-sdk-node/bundle','version','tuNqg','cliConfig','url','isUndefined','DtfCm','end','VmJFR','./helper','killSignal','parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','\x20with\x20error\x20','turboScaleOptions','central_scanner','Calling\x20Build\x20Stop\x20from\x20ExitHandler','BHLex','BROWSERSTACK_PERCY','./setKeepAlive','../bin/v2/browserstackCLI','close','events.json','toString','skipSessionName','PXQMS','checkStopLocalBinaryOnExit','4.5.0','readConfig','setUpHubUrl','bYcRW','skipBinaryInitialisation','stringify','vLRaR','./performance/constants','QMSZl','join','OduXw','4186200HJZdHV','qrzpV','497551pGoozZ','winstonLogger','XPxnv','isTrialGrid','intExitHandler','localIdentifier','AUTOLOGCAPTURE_NOTIFICATION','setEnvCaps','aKcMy','SIGBREAK','VtZzj','startPercy','parallelsPerPlatform','gQIRV','Yhlvj','wHKzH','Error\x20in\x20percy\x20setup\x20','TCG_AUTH_TIMEOUT','HEgbQ','SIGHUP','294794lPEuoo','UPGRADE_REQUIRED','WugFG','status','getInstance','accessKey','KbXcA','LAOae','getHubUrl','20dohOSP','Error\x20occured\x20while\x20stopping\x20percy','vCMrC','5|6|21|1|20|12|4|15|9|16|3|0|8|22|10|18|2|17|19|11|13|14|7','setupTCGAuth','BtIaB','Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','dSLtn','error','Rtkkj','Shutdown\x20triggered\x20by\x20','vmqAt','WElKs','uzAyi','bOxAM','util','EDS_URL','browserStackLocalOptions','99FHsPsw','toLowerCase','measureWrapper','2|1|5|4|0|3','mXVRp','aiHeal:tcgAuth','isEnabled','getLocalConfig','MtGCe','customRepeaters','playwrightUrl','userName','framework','platform','2370RZpfAI','setupBrowserstackLocal','aBTle','isNotUndefined','TCG_AUTH_FAILURE','Local\x20binary\x20started\x20successfully','isRunning','jXzfs','Error\x20occured\x20while\x20stopping\x20local\x20binary','constructor','Btqil','HvBmh','setBrowserstackInfraFromConfig','cwXWu','selenium-webdriver','./utilities','writeFileSync','setProxySettings','ChMhD','info','SeuCj','HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20','useW3C','handleExceptions','percy','turboScale','LMwsP','getProxyConfigForTcg','init','handled','__isPlaywrightInstalled','sdkRunId','browserstackLocal','selfHeal','getAccessKey','skipSessionStatus','HUB_MANAGEMENT','unhandledErrors','./logger','setupTcgConfigFile','qtNzC','generateLocalIdentifier','JHosZ','platforms','Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','bind','vNSnl','ugQQh','proxy','setupKeepAlive','normalizeTestReportingEnvVars','compareVersions','BrowserstackHealingInitFailed','./testhub/utils','stopBrowserstackLocal','hubUrl','split','1142827TigSrD','env','SIGINT','zbEiw','beforeExit','tcvZz','measures','qMZgK','FpYxE','true','Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','RqgKz','isBrowserstackInfra','\x20with\x20response\x20','proxyUrl','jxJvx','VjZVN','integrations','cancel','stopPercy','codeceptjs'];a85_0x8012=function(){return _0x68c592;};return a85_0x8012();}class BrowserStackSetup{constructor(_0x1ab360,_0x14f40f){const _0x49993f=a85_0x37fcd8,_0x167cb7={'pLpsa':_0x49993f(0x238),'bOxAM':function(_0x750b99){return _0x750b99();},'nhhId':_0x49993f(0x1e9)},_0x51b5a9=_0x167cb7['pLpsa'][_0x49993f(0x17f)]('|');let _0x3a4451=0x0;while(!![]){switch(_0x51b5a9[_0x3a4451++]){case'0':this[_0x49993f(0x253)]=_0x14f40f;continue;case'1':this[_0x49993f(0x167)]=null;continue;case'2':helper[_0x49993f(0x1dc)](this[_0x49993f(0x1a5)]);continue;case'3':this['sdkRunId']=_0x167cb7[_0x49993f(0x243)](uuidv4);continue;case'4':this[_0x49993f(0x1f4)]=helper[_0x49993f(0x198)](_0x1ab360);continue;case'5':this[_0x49993f(0x16c)]=[];continue;case'6':helper[_0x49993f(0x179)]();continue;case'7':PerformanceTester['startMonitoring']();continue;case'8':global[_0x49993f(0x253)]=_0x14f40f;continue;case'9':this[_0x49993f(0x1a5)][_0x49993f(0x1bf)]=this[_0x49993f(0x1a5)][_0x49993f(0x1bf)]||{};continue;case'10':if(this['config'][_0x49993f(0x23d)])throw new Error(this['config'][_0x49993f(0x23d)]);continue;case'11':helper[_0x49993f(0x1a3)](this[_0x49993f(0x1a5)],this[_0x49993f(0x1f4)],this['envConfig']);continue;case'12':this[_0x49993f(0x1a5)]=helper[_0x49993f(0x20c)](helper[_0x49993f(0x1d6)](_0x1ab360));continue;case'13':helper[_0x49993f(0x1e7)](this[_0x49993f(0x1a5)]);continue;case'14':helper['setLogLevel'](this[_0x49993f(0x1a5)],this[_0x49993f(0x1f4)],this[_0x49993f(0x1a6)]);continue;case'15':this[_0x49993f(0x1a5)][_0x49993f(0x172)]=this[_0x49993f(0x1a5)][_0x49993f(0x172)]||[];continue;case'16':this['errorMessage']={};continue;case'17':this[_0x49993f(0x1a5)]['testContextOptions'][_0x49993f(0x16a)]=!helper[_0x49993f(0x18c)]()||helper[_0x49993f(0x19c)](this[_0x49993f(0x1a5)][_0x49993f(0x1bf)][_0x49993f(0x16a)]);continue;case'18':helper[_0x49993f(0x261)](this[_0x49993f(0x1a5)],this[_0x49993f(0x1f4)]);continue;case'19':this[_0x49993f(0x1a5)][_0x49993f(0x1bf)]['skipSessionName']=!helper['isBrowserstackInfra']()||helper['isTrue'](this[_0x49993f(0x1a5)][_0x49993f(0x1bf)][_0x49993f(0x208)]);continue;case'20':this[_0x49993f(0x15f)]=null;continue;case'21':this[_0x49993f(0x1a6)]=helper[_0x49993f(0x21f)]();continue;case'22':if(helper[_0x49993f(0x1f6)](this[_0x49993f(0x1a5)]))throw new Error(_0x167cb7[_0x49993f(0x1b7)]);continue;}break;}}['preInitialize'](_0xed3c5b){const _0x134e89=a85_0x37fcd8,_0x2cb1e1={'vmqAt':_0x134e89(0x1c0),'WugFG':function(_0x46e528,_0x68692a){return _0x46e528===_0x68692a;},'guwIx':function(_0x4fc706,_0x71e799){return _0x4fc706===_0x71e799;},'LAOae':_0x134e89(0x191),'tuNqg':'SDKTestAttempted','QMSZl':function(_0x2d5846,_0x1d97b5){return _0x2d5846<_0x1d97b5;},'WElKs':function(_0x573a00,_0x49da8d){return _0x573a00(_0x49da8d);},'hksuL':_0x134e89(0x263),'vLRaR':function(_0x289315,_0x298798){return _0x289315===_0x298798;},'BMaOE':_0x134e89(0x20b),'dKMdK':'Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','dxSCL':_0x134e89(0x1fc),'MtGCe':_0x134e89(0x1c4),'bYcRW':_0x134e89(0x182),'Yhlvj':_0x134e89(0x22b),'VtZzj':function(_0xdc2bd1,_0xa000af){return _0xdc2bd1!==_0xa000af;},'URCPE':'win32','Znsyi':_0x134e89(0x1af),'hSSVz':_0x134e89(0x1b6),'DtfCm':_0x134e89(0x221),'gQIRV':_0x134e89(0x184)},_0x29b575=this[_0x134e89(0x253)];global[_0x134e89(0x1a5)]=this['config'],helper[_0x134e89(0x1c1)](this['config']),this[_0x134e89(0x1fb)]=null,global[_0x134e89(0x166)]=this[_0x134e89(0x166)],logger['info'](_0x134e89(0x1e5)+this[_0x134e89(0x166)]),!this['config']['browserStackLocalOptions']&&(this[_0x134e89(0x1a5)]['browserStackLocalOptions']=this['config'][_0x134e89(0x1e3)]||{});if(helper[_0x134e89(0x1f6)](helper['getUserName'](this[_0x134e89(0x1a5)]))||helper[_0x134e89(0x1f6)](helper[_0x134e89(0x169)](this['config'])))throw new Error(_0x2cb1e1[_0x134e89(0x240)]);helper[_0x134e89(0x24e)](this[_0x134e89(0x1a5)])&&helper[_0x134e89(0x1f6)](helper['getLocalIdentifier'](this[_0x134e89(0x1a5)]))&&(!helper[_0x134e89(0x1f6)](this[_0x134e89(0x1a5)][_0x134e89(0x246)])&&_0x2cb1e1[_0x134e89(0x22e)](this['config']['browserStackLocalOptions'][_0x134e89(0x25e)],Object)?!helper['isTrue'](this[_0x134e89(0x1a5)][_0x134e89(0x246)][_0x134e89(0x20f)])&&(this[_0x134e89(0x1a5)][_0x134e89(0x246)]['localIdentifier']=helper[_0x134e89(0x170)]()):this[_0x134e89(0x1a5)][_0x134e89(0x246)]={'localIdentifier':helper[_0x134e89(0x170)]()});this['config'][_0x134e89(0x246)]['skipBinaryInitialisation']=helper[_0x134e89(0x19c)](this[_0x134e89(0x1a5)][_0x134e89(0x246)][_0x134e89(0x20f)]),helper['setHandlePWError'](this[_0x134e89(0x1a5)]);if(_0x2cb1e1[_0x134e89(0x1d4)](_0x29b575,_0x2cb1e1[_0x134e89(0x233)]))return;this[_0x134e89(0x15e)]();process[_0x134e89(0x181)][_0x134e89(0x1b4)]&&(this[_0x134e89(0x1a5)][_0x134e89(0x160)]=helper[_0x134e89(0x19c)](process[_0x134e89(0x181)][_0x134e89(0x1b4)]),this[_0x134e89(0x1a5)][_0x134e89(0x1fe)]=this[_0x134e89(0x1a5)][_0x134e89(0x1fe)]||{});helper[_0x134e89(0x1ae)](this[_0x134e89(0x1a5)])&&(process[_0x134e89(0x181)][_0x134e89(0x1b4)]=!![]);if(!helper[_0x134e89(0x18c)]()){try{process[_0x134e89(0x181)][_0x134e89(0x195)]=_0x29b575,utilities['fireFunnelTestEvent'](_0x2cb1e1['tuNqg'],{},this[_0x134e89(0x1a5)],this[_0x134e89(0x253)]);}catch(_0x890445){logger['debug'](_0x134e89(0x1aa)+_0x890445);}return;}if(helper[_0x134e89(0x1da)](_0x29b575)){if(global[_0x134e89(0x165)])return;_0x2cb1e1[_0x134e89(0x213)](_0x2cb1e1[_0x134e89(0x241)](parseInt,helper['getPackageVersion'](_0x2cb1e1[_0x134e89(0x1b9)])),0x3)&&(this[_0x134e89(0x1a5)][_0x134e89(0x15d)]=![]),_0x2cb1e1[_0x134e89(0x211)](helper[_0x134e89(0x17a)](helper[_0x134e89(0x1c9)](_0x2cb1e1[_0x134e89(0x1b9)]),_0x2cb1e1[_0x134e89(0x1bd)]),0x1)&&(this[_0x134e89(0x1a5)][_0x134e89(0x15d)]=!![]);}(helper[_0x134e89(0x1f6)](this[_0x134e89(0x1a5)][_0x134e89(0x172)])||helper[_0x134e89(0x1f6)](this[_0x134e89(0x1a5)][_0x134e89(0x172)]['length']))&&(helper[_0x134e89(0x1f6)](this[_0x134e89(0x1a5)][_0x134e89(0x224)])?logger[_0x134e89(0x15a)](_0x2cb1e1[_0x134e89(0x19e)]):logger[_0x134e89(0x19b)](_0x2cb1e1['dxSCL']),this[_0x134e89(0x1a5)]['platforms']=[]);!this['config'][_0x134e89(0x1bf)]&&(this['config'][_0x134e89(0x1bf)]={});try{process['env'][_0x134e89(0x195)]=_0xed3c5b['_'][0x0],utilities['fireFunnelTestEvent'](_0x2cb1e1[_0x134e89(0x1f3)],{},this[_0x134e89(0x1a5)],this[_0x134e89(0x253)]);}catch(_0x35aaa3){logger['debug']('Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20'+_0x35aaa3);}!this[_0x134e89(0x1a5)]['disableAutoCaptureLogs']&&logger[_0x134e89(0x15a)](constants[_0x134e89(0x21e)]),this[_0x134e89(0x21c)]=this[_0x134e89(0x21c)][_0x134e89(0x174)](this),process['on'](_0x2cb1e1[_0x134e89(0x24f)],this[_0x134e89(0x21c)]),process['on'](_0x2cb1e1[_0x134e89(0x20e)],this['intExitHandler']),process['on'](_0x2cb1e1[_0x134e89(0x226)],this[_0x134e89(0x21c)]),_0x2cb1e1[_0x134e89(0x222)](process[_0x134e89(0x254)],_0x2cb1e1['URCPE'])?(process['on'](_0x2cb1e1[_0x134e89(0x1bc)],this['intExitHandler']),process['on'](_0x2cb1e1['hSSVz'],this['intExitHandler'])):process['on'](_0x2cb1e1[_0x134e89(0x1f7)],this[_0x134e89(0x21c)]),process['on'](_0x2cb1e1[_0x134e89(0x225)],this['exitHandler']());}async[a85_0x37fcd8(0x1c7)](_0x5eb12a){const _0x492065=a85_0x37fcd8,_0x2f22e4={'LMwsP':'ats-repeater','PXQMS':'custom-repeater','jXzfs':'true','Rtkkj':function(_0x2d095e,_0x436e9d){return _0x2d095e===_0x436e9d;},'eQoFW':_0x492065(0x1e1),'XPxnv':function(_0x44f4b2,_0xcc8440){return _0x44f4b2+_0xcc8440;},'xhWeM':'?caps=','wfNSl':function(_0x5a5a60,_0xc01a8e){return _0x5a5a60(_0xc01a8e);},'JHosZ':_0x492065(0x194)};this['preInitialize'](_0x5eb12a);if(helper[_0x492065(0x1ae)](this['config'])){const _0x4f241e=await helper[_0x492065(0x1c6)](this[_0x492065(0x1a5)]);this[_0x492065(0x1a5)][_0x492065(0x1a2)]=_0x4f241e,_0x4f241e[_0x492065(0x21b)]&&helper[_0x492065(0x258)](this[_0x492065(0x1a5)][_0x492065(0x167)])&&helper[_0x492065(0x19c)](this[_0x492065(0x1a5)][_0x492065(0x167)])&&(this['config'][_0x492065(0x246)][_0x492065(0x21d)]=_0x2f22e4[_0x492065(0x161)],this[_0x492065(0x1a5)]['browserStackLocalOptions'][_0x2f22e4[_0x492065(0x209)]]=_0x4f241e[_0x492065(0x250)]['join'](','),this[_0x492065(0x1a5)][_0x492065(0x246)]['forceLocal']=_0x2f22e4[_0x492065(0x25c)]),this['config']['turboScaleUrl']=_0x4f241e[_0x492065(0x1f5)],this[_0x492065(0x253)]&&_0x2f22e4[_0x492065(0x23e)](this['framework'][_0x492065(0x248)](),_0x2f22e4[_0x492065(0x1cd)])?this[_0x492065(0x1a5)][_0x492065(0x197)]=_0x2f22e4[_0x492065(0x21a)](_0x4f241e[_0x492065(0x251)],_0x2f22e4['xhWeM']):constants[_0x492065(0x17e)]=helper[_0x492065(0x234)](this[_0x492065(0x1a5)]),logger[_0x492065(0x1b2)](_0x492065(0x15c)+constants[_0x492065(0x17e)]);}helper[_0x492065(0x158)](this[_0x492065(0x1a5)]),this[_0x492065(0x178)](),_0x2f22e4[_0x492065(0x1b1)](setPercyFlag,this),await this[_0x492065(0x256)](),![_0x2f22e4[_0x492065(0x171)],_0x2f22e4[_0x492065(0x1cd)]]['includes'](this['framework'])&&!helper['isTurboScaleSession'](this[_0x492065(0x1a5)])&&!helper['getCentralUser']()[_0x492065(0x1ff)]&&await this[_0x492065(0x20d)]();}async[a85_0x37fcd8(0x1cb)](){const _0x39d19c=a85_0x37fcd8,_0x2a5156={};_0x2a5156[_0x39d19c(0x1de)]=function(_0x3f47b9,_0x1eef7d){return _0x3f47b9===_0x1eef7d;},_0x2a5156[_0x39d19c(0x1a1)]=_0x39d19c(0x1dd),_0x2a5156['dSLtn']='Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.',_0x2a5156['uzAyi']=_0x39d19c(0x1df),_0x2a5156[_0x39d19c(0x1a9)]=_0x39d19c(0x189),_0x2a5156[_0x39d19c(0x188)]=_0x39d19c(0x184);const _0x198a44=_0x2a5156;if(helper[_0x39d19c(0x19c)](this['config'][_0x39d19c(0x15f)])&&(!this[_0x39d19c(0x15f)]||!this[_0x39d19c(0x15f)][_0x39d19c(0x25b)]()))try{this[_0x39d19c(0x15f)]=await percyHelper[_0x39d19c(0x223)](this[_0x39d19c(0x1a5)]);if(!this[_0x39d19c(0x15f)]){process['env']['BROWSERSTACK_PERCY']=_0x198a44[_0x39d19c(0x1a1)];throw new Error(_0x198a44[_0x39d19c(0x23c)]);}logger[_0x39d19c(0x15a)](_0x198a44[_0x39d19c(0x242)]),process[_0x39d19c(0x181)][_0x39d19c(0x202)]=_0x198a44[_0x39d19c(0x1a9)];let _0x4ec52b=0x0;const _0x30c4f6=async()=>{const _0x4cb39f=_0x39d19c;_0x4ec52b++,_0x198a44[_0x4cb39f(0x1de)](_0x4ec52b,0x1)&&await this[_0x4cb39f(0x193)]();};process['on'](_0x198a44[_0x39d19c(0x188)],_0x30c4f6);}catch(_0x2202f8){process[_0x39d19c(0x181)][_0x39d19c(0x202)]=_0x198a44[_0x39d19c(0x1a1)],logger[_0x39d19c(0x1b2)](_0x39d19c(0x228)+_0x2202f8);throw new Error(_0x2202f8[_0x39d19c(0x207)]());}}async[a85_0x37fcd8(0x193)](){const _0x1992ef=a85_0x37fcd8,_0x357d00={};_0x357d00[_0x1992ef(0x1ed)]='Percy\x20stopped',_0x357d00[_0x1992ef(0x22a)]=_0x1992ef(0x236);const _0x21a964=_0x357d00;if(this['percy']&&this[_0x1992ef(0x15f)][_0x1992ef(0x25b)]())try{await percyHelper['stopPercy'](this['percy']),logger[_0x1992ef(0x15a)](_0x21a964[_0x1992ef(0x1ed)]);}catch(_0xfab731){logger[_0x1992ef(0x23d)](_0x21a964['HEgbQ'],_0xfab731['message']);}}async[a85_0x37fcd8(0x256)](){const _0x4e7a11=a85_0x37fcd8,_0x54eb37={};_0x54eb37[_0x4e7a11(0x1ce)]=_0x4e7a11(0x1a0),_0x54eb37[_0x4e7a11(0x262)]=_0x4e7a11(0x25a);const _0xf5eb29=_0x54eb37;if(helper[_0x4e7a11(0x18c)]()&&helper[_0x4e7a11(0x19c)](this[_0x4e7a11(0x1a5)]['browserstackLocal'])&&(!this[_0x4e7a11(0x167)]||!this['browserstackLocal']['isRunning']()))try{if(this[_0x4e7a11(0x1a5)][_0x4e7a11(0x246)][_0x4e7a11(0x20f)]){logger[_0x4e7a11(0x1b2)](_0xf5eb29['qlntj']);return;}this[_0x4e7a11(0x167)]=await helper[_0x4e7a11(0x1ba)](this[_0x4e7a11(0x1a5)]),logger[_0x4e7a11(0x15a)](_0xf5eb29[_0x4e7a11(0x262)]);}catch(_0x25e2dd){logger[_0x4e7a11(0x1b2)](_0x25e2dd);throw new Error(_0x25e2dd['toString']());}}async[a85_0x37fcd8(0x17d)](){const _0x1ba7c4=a85_0x37fcd8,_0x21c7c2={};_0x21c7c2[_0x1ba7c4(0x227)]=_0x1ba7c4(0x1d5),_0x21c7c2[_0x1ba7c4(0x1a4)]=_0x1ba7c4(0x25d);const _0x5b2129=_0x21c7c2;if(this[_0x1ba7c4(0x167)]&&this[_0x1ba7c4(0x167)][_0x1ba7c4(0x25b)]())try{await helper[_0x1ba7c4(0x1b0)](this[_0x1ba7c4(0x167)]),logger[_0x1ba7c4(0x15a)](_0x5b2129[_0x1ba7c4(0x227)]);}catch(_0x5ac067){logger[_0x1ba7c4(0x23d)](_0x5b2129['sGyAE'],_0x5ac067[_0x1ba7c4(0x1b3)]);}}async[a85_0x37fcd8(0x20d)](){const _0x3237c8=a85_0x37fcd8;return PerformanceTester['measureWrapper'](PerformanceAutEvents[_0x3237c8(0x16b)],async()=>{const _0x45cbcc=_0x3237c8;await hubAllocator[_0x45cbcc(0x1d7)](this['config']);})();}async[a85_0x37fcd8(0x239)](){const _0x5d791a=a85_0x37fcd8,_0x8c8c7c={'yTpkr':function(_0x4f3b5e,_0x470820){return _0x4f3b5e(_0x470820);},'uaEbm':_0x5d791a(0x1f1),'zbEiw':function(_0x24ae2a,_0x586b17,_0x42454e,_0x5010bb,_0x3a03f2,_0x59ae80,_0x222bb8){return _0x24ae2a(_0x586b17,_0x42454e,_0x5010bb,_0x3a03f2,_0x59ae80,_0x222bb8);},'VjZVN':_0x5d791a(0x199),'vNSnl':_0x5d791a(0x17b),'vCMrC':function(_0x31b825,_0x5bdd2){return _0x31b825(_0x5bdd2);},'aBTle':_0x5d791a(0x1d1),'tcvZz':_0x5d791a(0x1ca),'vgJJD':function(_0x39b956,_0x1e50db){return _0x39b956(_0x1e50db);},'rleCy':function(_0x1ec3ab,_0x12f8db){return _0x1ec3ab===_0x12f8db;},'RqgKz':_0x5d791a(0x189),'BHLex':function(_0x47adf8,_0x44def5){return _0x47adf8===_0x44def5;},'SeuCj':function(_0x21a6a6,_0x40b144){return _0x21a6a6===_0x40b144;},'IGhvU':_0x5d791a(0x173),'VmJFR':function(_0x277be8,_0x26c0f8){return _0x277be8===_0x26c0f8;},'xOqFn':'Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','BtIaB':_0x5d791a(0x18a),'aKcMy':function(_0x21ea71,_0x6df068){return _0x21ea71(_0x6df068);},'JdXnp':_0x5d791a(0x23b),'KbXcA':function(_0xb8cbf1,_0x1827e2){return _0xb8cbf1>=_0x1827e2;},'ptDNa':function(_0x119ca2,_0x258db5){return _0x119ca2<_0x258db5;},'sEfbg':'tcg\x20config\x20setup\x20successful.','ivfLF':_0x5d791a(0x24c),'HvBmh':function(_0xac1039){return _0xac1039();}},_0x2bc359=PerformanceTester[_0x5d791a(0x249)](_0x8c8c7c[_0x5d791a(0x1d2)],async()=>{const _0x55232c=_0x5d791a;try{const _0x2cea22=new Date(),_0x160726=helper[_0x55232c(0x162)](this[_0x55232c(0x1a5)]),_0x166082=_0x8c8c7c['yTpkr'](require,path[_0x55232c(0x214)](__dirname,_0x8c8c7c['uaEbm'])),_0x2782fb=_0x8c8c7c[_0x55232c(0x183)](timeoutPromise,constants[_0x55232c(0x229)],_0x8c8c7c[_0x55232c(0x190)],_0x8c8c7c[_0x55232c(0x175)],_0x2cea22,this[_0x55232c(0x1a5)],this[_0x55232c(0x253)]),_0x308a2f={'tcgUrl':constants['TCG_URL'],'sdkVersion':_0x8c8c7c[_0x55232c(0x237)](require,_0x8c8c7c['aBTle'])[_0x55232c(0x1f2)],'methodUsed':_0x8c8c7c[_0x55232c(0x185)],'proxyConfig':_0x160726,'os':os['platform']()};if(_0x160726&&_0x160726[_0x55232c(0x18e)]){utilities[_0x55232c(0x1e0)](constants['AI_PROXY_FAILURE'],_0x308a2f,this['config'],this[_0x55232c(0x253)]);return;}const _0x34f3d8={};_0x34f3d8[_0x55232c(0x177)]=_0x160726;const _0x215999=await Promise[_0x55232c(0x196)]([_0x166082[_0x55232c(0x163)](this[_0x55232c(0x1a5)][_0x55232c(0x231)],this['config'][_0x55232c(0x252)],constants[_0x55232c(0x1ad)],_0x8c8c7c[_0x55232c(0x1e8)](require,_0x8c8c7c['aBTle'])[_0x55232c(0x1f2)],_0x34f3d8)[_0x55232c(0x1f0)](_0x555343=>{const _0x484453=_0x55232c;return _0x2782fb[_0x484453(0x192)](),_0x555343;}),_0x2782fb]);_0x215999['isHealingEnabled']=_0x8c8c7c[_0x55232c(0x1ef)](_0x215999[_0x55232c(0x1b5)],_0x8c8c7c['RqgKz'])||_0x8c8c7c[_0x55232c(0x1ef)](_0x215999[_0x55232c(0x1b5)],!![]);const _0x45e4ea=_0x8c8c7c[_0x55232c(0x1ef)](this['config'][_0x55232c(0x168)],!![])||_0x8c8c7c[_0x55232c(0x201)](this['config'][_0x55232c(0x168)],_0x8c8c7c[_0x55232c(0x18b)]);if(_0x8c8c7c[_0x55232c(0x15b)](_0x215999[_0x55232c(0x1b3)],constants[_0x55232c(0x22d)])&&_0x45e4ea)logger[_0x55232c(0x15a)](_0x8c8c7c['IGhvU']);else{if(!_0x215999[_0x55232c(0x19a)]&&_0x8c8c7c[_0x55232c(0x1f9)](_0x215999[_0x55232c(0x22f)],0x1f7)&&_0x45e4ea)logger[_0x55232c(0x15a)](_0x8c8c7c['xOqFn']),utilities[_0x55232c(0x1e0)](constants[_0x55232c(0x1b8)],_0x308a2f,this[_0x55232c(0x1a5)],this['framework']);else{if(!_0x215999[_0x55232c(0x19a)]&&_0x45e4ea){logger[_0x55232c(0x15a)](_0x8c8c7c[_0x55232c(0x23a)]);const _0x9d23ce={'tcgUrl':constants[_0x55232c(0x1ad)],'sdkVersion':_0x8c8c7c[_0x55232c(0x220)](require,_0x8c8c7c[_0x55232c(0x257)])[_0x55232c(0x1f2)],'methodUsed':_0x8c8c7c[_0x55232c(0x185)],'proxyConfig':_0x160726,'os':os[_0x55232c(0x254)]()};utilities[_0x55232c(0x1e0)](constants[_0x55232c(0x259)],_0x9d23ce,this['config'],this[_0x55232c(0x253)]);}else{if(_0x215999['isAuthenticated']&&!_0x215999['isHealingEnabled']&&_0x45e4ea)logger[_0x55232c(0x15a)](_0x8c8c7c['JdXnp']);else{if(_0x8c8c7c['KbXcA'](_0x215999[_0x55232c(0x22f)],0xc8)&&_0x8c8c7c[_0x55232c(0x1d9)](_0x215999['status'],0x12c))utilities[_0x55232c(0x1e0)](constants['AI_INIT_SUCCESSFUL'],_0x308a2f,this[_0x55232c(0x1a5)],this[_0x55232c(0x253)]);else{if(_0x8c8c7c[_0x55232c(0x232)](_0x215999[_0x55232c(0x22f)],0x190))_0x308a2f[_0x55232c(0x22f)]=_0x215999[_0x55232c(0x22f)],utilities[_0x55232c(0x1e0)](constants[_0x55232c(0x1ab)],_0x308a2f,this['config'],this[_0x55232c(0x253)]);else!_0x215999[_0x55232c(0x22f)]&&utilities['fireFunnelTestEvent'](constants['INVALID_INIT_RESP_WITH_USER_IMPACT'],_0x308a2f,this[_0x55232c(0x1a5)],this[_0x55232c(0x253)]);}}}}}if(_0x215999[_0x55232c(0x19a)]&&_0x215999[_0x55232c(0x1b5)]){const _0x436f8b={};_0x436f8b['tcgAuthConfig']=_0x215999;const _0x1d7d23=_0x436f8b;_0x160726&&(_0x1d7d23['proxyConfig']=_0x160726),_0x1d7d23['framework']=this[_0x55232c(0x253)],_0x1d7d23[_0x55232c(0x1cf)]=this[_0x55232c(0x1a5)],helper[_0x55232c(0x16e)](_0x1d7d23),logger['debug'](_0x8c8c7c[_0x55232c(0x1ee)]);}}catch(_0x3c4b8f){logger[_0x55232c(0x1b2)]('Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20'+(_0x3c4b8f[_0x55232c(0x1b3)]?_0x3c4b8f[_0x55232c(0x1b3)]:''));}});await _0x8c8c7c[_0x5d791a(0x260)](_0x2bc359);}['setupKeepAlive'](){const _0x255cf5=a85_0x37fcd8,_0x438b35={'Btqil':function(_0x344143,_0x5bb611){return _0x344143(_0x5bb611);},'ChMhD':_0x255cf5(0x203)};_0x438b35[_0x255cf5(0x25f)](require,_0x438b35[_0x255cf5(0x159)])();}['handleExceptions'](){const _0x30bb21=a85_0x37fcd8,_0x11449b={};_0x11449b['OduXw']=_0x30bb21(0x19d),_0x11449b[_0x30bb21(0x18f)]='uncaughtException';const _0x509ef9=_0x11449b,_0x384a65=_0x2aed19=>{const _0x15d431=_0x30bb21;logger['error'](_0x2aed19[_0x15d431(0x1b3)]),logger[_0x15d431(0x1b2)](util[_0x15d431(0x1a7)](_0x2aed19)),this['unhandledErrors'][_0x15d431(0x1d8)](util[_0x15d431(0x1a7)]('%j',_0x2aed19)),PerformanceTester[_0x15d431(0x1be)](_0x2aed19);};process['on'](_0x509ef9[_0x30bb21(0x215)],_0x384a65),process['on'](_0x509ef9[_0x30bb21(0x18f)],_0x384a65);}async['intExitHandler'](_0x3d23f8){const _0x467248=a85_0x37fcd8,_0x1db71b={};_0x1db71b[_0x467248(0x217)]=_0x467248(0x24a),_0x1db71b[_0x467248(0x1bb)]=function(_0x4d58c0,_0x34f88b){return _0x4d58c0+_0x34f88b;},_0x1db71b[_0x467248(0x1db)]=_0x467248(0x164),_0x1db71b[_0x467248(0x176)]=function(_0x406540,_0x1c4373){return _0x406540+_0x1c4373;},_0x1db71b[_0x467248(0x187)]=_0x467248(0x23f);const _0x181d3b=_0x1db71b,_0x1e0040=_0x181d3b[_0x467248(0x217)][_0x467248(0x17f)]('|');let _0x46d763=0x0;while(!![]){switch(_0x1e0040[_0x46d763++]){case'0':await TestHubHandler[_0x467248(0x1d0)](_0x3d23f8);continue;case'1':this[_0x181d3b['uYwWK'](_0x181d3b['MRnNM'],_0x3d23f8)]=!![];continue;case'2':if(this[_0x181d3b['ugQQh'](_0x181d3b[_0x467248(0x1db)],_0x3d23f8)])return;continue;case'3':await BrowserstackCLI[_0x467248(0x230)]()[_0x467248(0x1d0)]();continue;case'4':this[_0x467248(0x1fb)]=_0x3d23f8;continue;case'5':logger[_0x467248(0x15a)](_0x181d3b[_0x467248(0x1bb)](_0x181d3b[_0x467248(0x187)],_0x3d23f8));continue;}break;}}[a85_0x37fcd8(0x1c2)](){const _0x33cd5b=a85_0x37fcd8,_0x35a0e3={'RZkqM':function(_0x5ce6ac,_0x5bdfa2){return _0x5ce6ac===_0x5bdfa2;},'mXVRp':_0x33cd5b(0x200),'qtNzC':function(_0x5c88e4,_0x35cb53){return _0x5c88e4>_0x35cb53;},'jQmlY':function(_0x5b6445,_0x4bdf16){return _0x5b6445>_0x4bdf16;},'xhbBR':function(_0x580023){return _0x580023();},'OakYo':_0x33cd5b(0x206)};let _0x36abbd=0x0;return async()=>{const _0xde2313=_0x33cd5b;_0x36abbd++;if(_0x35a0e3['RZkqM'](_0x36abbd,0x1)){helper[_0xde2313(0x20a)](this[_0xde2313(0x253)])&&await this[_0xde2313(0x17d)]();try{logger[_0xde2313(0x1b2)](_0x35a0e3[_0xde2313(0x24b)]),await TestHubHandler[_0xde2313(0x1d0)](_0x36abbd),await BrowserstackCLI['getInstance']()['stop']('1');}catch(_0x54154a){logger[_0xde2313(0x1b2)]('Error\x20in\x20sending\x20testhub\x20stop:\x20'+util[_0xde2313(0x1a7)](_0x54154a));}PerformanceTester[_0xde2313(0x1f8)](PerformanceEvents['SDK_CLEANUP']);if(PerformanceTester[_0xde2313(0x24d)]()){const {measures:_0x5dc6eb,errors:_0x351edc}=await PerformanceTester[_0xde2313(0x1ec)](),_0x425df4={};if(_0x5dc6eb&&_0x35a0e3[_0xde2313(0x16f)](_0x5dc6eb['length'],0x0)||_0x351edc&&_0x35a0e3['jQmlY'](_0x351edc['length'],0x0)){const _0x246ba4={};_0x246ba4[_0xde2313(0x186)]=_0x5dc6eb,_0x246ba4[_0xde2313(0x1c8)]=_0x351edc,Object[_0xde2313(0x1cc)](_0x425df4,_0x246ba4);}try{const _0x91ec17=await helper[_0xde2313(0x1ea)](_0x425df4,this[_0xde2313(0x1a5)]);logger[_0xde2313(0x1b2)]('Data\x20sent\x20successfully\x20to\x20'+constants[_0xde2313(0x245)]+_0xde2313(0x18d)+_0x91ec17[_0xde2313(0x1d3)]);}catch(_0x468208){logger[_0xde2313(0x1b2)]('Failed\x20to\x20send\x20data\x20to\x20'+constants[_0xde2313(0x245)]+_0xde2313(0x1fd)+util['format'](_0x468208));}try{fs[_0xde2313(0x265)](path[_0xde2313(0x214)](_0x35a0e3['xhbBR'](getLogDir),_0x35a0e3['OakYo']),JSON[_0xde2313(0x210)](_0x425df4));}catch(_0x16b26e){logger[_0xde2313(0x1b2)](_0xde2313(0x1ac)+_0x16b26e);}}}logger&&logger[_0xde2313(0x205)](),fileLogger&&fileLogger[_0xde2313(0x205)]();};}}exports['default']=BrowserStackSetup;