const a28_0x4090ba=a28_0x2e36;(function(_0x3ed069,_0x261f74){const _0x2c08f9=a28_0x2e36,_0x2dcb5c=_0x3ed069();while(!![]){try{const _0xf8c22d=parseInt(_0x2c08f9(0x14c))/0x1*(-parseInt(_0x2c08f9(0x160))/0x2)+-parseInt(_0x2c08f9(0x15b))/0x3*(parseInt(_0x2c08f9(0x158))/0x4)+-parseInt(_0x2c08f9(0x137))/0x5*(parseInt(_0x2c08f9(0x142))/0x6)+parseInt(_0x2c08f9(0x141))/0x7*(parseInt(_0x2c08f9(0x13a))/0x8)+parseInt(_0x2c08f9(0x13f))/0x9+parseInt(_0x2c08f9(0x12e))/0xa+parseInt(_0x2c08f9(0x167))/0xb;if(_0xf8c22d===_0x261f74)break;else _0x2dcb5c['push'](_0x2dcb5c['shift']());}catch(_0x3dc4c8){_0x2dcb5c['push'](_0x2dcb5c['shift']());}}}(a28_0x22db,0x63bfd));function a28_0x2e36(_0x13e474,_0x266d64){const _0x22dbdf=a28_0x22db();return a28_0x2e36=function(_0x2e3625,_0x326459){_0x2e3625=_0x2e3625-0x12c;let _0x5448a9=_0x22dbdf[_0x2e3625];return _0x5448a9;},a28_0x2e36(_0x13e474,_0x266d64);}const fs=require('fs'),path=require(a28_0x4090ba(0x166)),Promise=require(a28_0x4090ba(0x159)),yaml=require('js-yaml'),{CLOUDFORMATION_SCHEMA}=require(a28_0x4090ba(0x134)),AWS=require(a28_0x4090ba(0x152))['awsObj'],AWSUtils=require(a28_0x4090ba(0x152)),{CLUSTER_HUB_HA_STACK_NAME,COMMON_HST_TAGS}=require(a28_0x4090ba(0x155)),{logger}=require(a28_0x4090ba(0x13b));Promise[a28_0x4090ba(0x131)](fs);const addTags=async(_0x124ad,_0x4171a4)=>{const _0x15f688=a28_0x4090ba;for(const _0xd6ce1b in _0x124ad[_0x15f688(0x162)]){_0x124ad[_0x15f688(0x162)][_0xd6ce1b]['Properties']&&_0x124ad[_0x15f688(0x162)][_0xd6ce1b][_0x15f688(0x147)][_0x15f688(0x139)]&&_0x124ad[_0x15f688(0x162)][_0xd6ce1b][_0x15f688(0x147)][_0x15f688(0x139)][_0x15f688(0x138)](..._0x4171a4);}};function a28_0x22db(){const _0x4e0eba=['js-yaml-cloudformation-schema','toString','Key','45Djebox','push','Tags','49736pCnrYe','../config/logger','TemplateBody','BaseResourceName','utf-8','5268492mKtnwo','stringify','399sadNZU','342414NBkgNu','CloudFormation','promise','YLFBU','MJFOi','Properties','StackId','ZCYex','StackName','hub-ha.yaml','2QWzOQG','nytfX','WqhsE','createStack','valueOf','schema','./AWSUtils','stackCreateComplete','2010-05-15','../config/constants','join','getOidcUrl','8bcGXwJ','bluebird','Value','927198YFffZi','ClusterOIDCURL','rOUiy','RGrMY','CAPABILITY_NAMED_IAM','487930oYnIrQ','Capabilities','Resources','VpcId','load','iyzhN','path','9132156djBSJX','OLgtn','OBibq','FsWzF','2583030DHsQot','://','-cf','promisifyAll','createHubHaStack','OnFailure'];a28_0x22db=function(){return _0x4e0eba;};return a28_0x22db();}exports[a28_0x4090ba(0x132)]=async(_0x3ccdd5,_0x4bf6e7=null)=>{const _0x55f15b=a28_0x4090ba,_0x5ecfbe={'OBibq':'browserstack:cluster','iyzhN':'browserstack:creationDate','fUhMX':_0x55f15b(0x154),'OLgtn':'CFTemplates','ZCYex':_0x55f15b(0x14b),'MJFOi':_0x55f15b(0x13e),'wFIzP':function(_0x5db218,_0x45f041,_0xf7d86b){return _0x5db218(_0x45f041,_0xf7d86b);},'YLFBU':_0x55f15b(0x12f),'FsWzF':'DELETE','rOUiy':_0x55f15b(0x163),'KZNJJ':_0x55f15b(0x13d),'WqhsE':_0x55f15b(0x15c),'utrlb':_0x55f15b(0x15f),'nytfX':'Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','RGrMY':_0x55f15b(0x153)},_0xeda2cf=COMMON_HST_TAGS,_0x301886={};_0x301886[_0x55f15b(0x136)]=_0x5ecfbe[_0x55f15b(0x12c)],_0x301886[_0x55f15b(0x15a)]=_0x3ccdd5,_0xeda2cf[_0x55f15b(0x138)](_0x301886),_0xeda2cf[_0x55f15b(0x138)]({'Key':_0x5ecfbe[_0x55f15b(0x165)],'Value':new Date()[_0x55f15b(0x150)]()[_0x55f15b(0x135)]()});const _0x5af60f={};_0x5af60f['apiVersion']=_0x5ecfbe['fUhMX'];const _0x416671=new AWS[(_0x55f15b(0x143))](_0x5af60f),_0x48c0f2=await fs['readFileAsync'](path[_0x55f15b(0x156)](__dirname,'..',_0x5ecfbe[_0x55f15b(0x168)],_0x5ecfbe[_0x55f15b(0x149)]),_0x5ecfbe[_0x55f15b(0x146)]),_0x25115e={};_0x25115e[_0x55f15b(0x151)]=CLOUDFORMATION_SCHEMA;const _0x4dbc51=yaml[_0x55f15b(0x164)](_0x48c0f2,_0x25115e);await _0x5ecfbe['wFIzP'](addTags,_0x4dbc51,_0xeda2cf);const _0x3e7b27=JSON[_0x55f15b(0x140)](_0x4dbc51);let _0x3c6848=await AWSUtils[_0x55f15b(0x157)](_0x3ccdd5);_0x3c6848=_0x3c6848['split'](_0x5ecfbe[_0x55f15b(0x145)])[0x1];const _0x20feed={};_0x20feed[_0x55f15b(0x14a)]=CLUSTER_HUB_HA_STACK_NAME+'-'+_0x3ccdd5+_0x55f15b(0x130),_0x20feed[_0x55f15b(0x133)]=_0x5ecfbe[_0x55f15b(0x12d)],_0x20feed[_0x55f15b(0x13c)]=_0x3e7b27,_0x20feed['Parameters']=[{'ParameterKey':_0x5ecfbe[_0x55f15b(0x15d)],'ParameterValue':_0x4bf6e7},{'ParameterKey':_0x5ecfbe['KZNJJ'],'ParameterValue':CLUSTER_HUB_HA_STACK_NAME+'-'+_0x3ccdd5},{'ParameterKey':_0x5ecfbe[_0x55f15b(0x14e)],'ParameterValue':_0x3c6848}],_0x20feed[_0x55f15b(0x161)]=[_0x5ecfbe['utrlb']],_0x20feed[_0x55f15b(0x139)]=_0xeda2cf;const _0x4f6588=_0x20feed,_0x26eda3=await _0x416671[_0x55f15b(0x14f)](_0x4f6588)[_0x55f15b(0x144)]();logger['info'](_0x5ecfbe[_0x55f15b(0x14d)]);const _0x57a403={};return _0x57a403[_0x55f15b(0x14a)]=_0x26eda3[_0x55f15b(0x148)],_0x416671['waitFor'](_0x5ecfbe[_0x55f15b(0x15e)],_0x57a403)[_0x55f15b(0x144)]();};