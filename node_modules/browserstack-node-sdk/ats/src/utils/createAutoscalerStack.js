const a26_0x431298=a26_0x4ca8;function a26_0x4169(){const _0x9b7af4=['Value','Key','push','2010-05-15','toString','2wASsZD','asMMf','createAutoscalerStack','StackId','OnFailure','fnzLQ','browserstack:cluster','Vkigw','GIjjv','ClusterName','../config/logger','utf-8','debug','18735520Zrizjg','Tags','12899295iuITZy','path','readFileAsync','4315BhjjVe','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','DELETE','QunCV','2010MALsyn','8768048bJuSts','wtEJw','23786SWCeUz','YrfUW','ewVsK','cZuzc','promisifyAll','Bquyd','Properties','StackName','apiVersion','TemplateBody','389121NNUubZ','join','YVNlb','waitFor','autoscaler-role-creation.yaml','stackCreateComplete','./AWSUtils','stringify','js-yaml-cloudformation-schema','../config/constants','CloudFormation','Resources','2256LJOsSp','JpEYk','261846EvIjrt','browserstack:creationDate','Capabilities','Parameters','valueOf','promise'];a26_0x4169=function(){return _0x9b7af4;};return a26_0x4169();}(function(_0x3042f4,_0x3a423b){const _0x12d1a8=a26_0x4ca8,_0x5ef307=_0x3042f4();while(!![]){try{const _0x4abf74=-parseInt(_0x12d1a8(0x16e))/0x1*(-parseInt(_0x12d1a8(0x163))/0x2)+-parseInt(_0x12d1a8(0x155))/0x3+parseInt(_0x12d1a8(0x161))/0x4*(-parseInt(_0x12d1a8(0x180))/0x5)+-parseInt(_0x12d1a8(0x184))/0x6*(parseInt(_0x12d1a8(0x187))/0x7)+-parseInt(_0x12d1a8(0x185))/0x8+parseInt(_0x12d1a8(0x17d))/0x9+parseInt(_0x12d1a8(0x17b))/0xa;if(_0x4abf74===_0x3a423b)break;else _0x5ef307['push'](_0x5ef307['shift']());}catch(_0x46a83e){_0x5ef307['push'](_0x5ef307['shift']());}}}(a26_0x4169,0xaf436));const fs=require('fs'),path=require(a26_0x431298(0x17e)),yaml=require('js-yaml'),{CLOUDFORMATION_SCHEMA}=require(a26_0x431298(0x15d)),Promise=require('bluebird'),AWS=require(a26_0x431298(0x15b))['awsObj'],{CLUSTER_AUTOSCALER_STACK_NAME,COMMON_HST_TAGS}=require(a26_0x431298(0x15e)),{logger}=require(a26_0x431298(0x178));Promise[a26_0x431298(0x18b)](fs);function a26_0x4ca8(_0x5b9895,_0x2964ec){const _0x4169d4=a26_0x4169();return a26_0x4ca8=function(_0x4ca8d4,_0x55afe6){_0x4ca8d4=_0x4ca8d4-0x155;let _0x395bfc=_0x4169d4[_0x4ca8d4];return _0x395bfc;},a26_0x4ca8(_0x5b9895,_0x2964ec);}const addAutoscalerTags=async(_0xe0a51e,_0x59437c,_0x2e9118)=>{const _0x4d0c6e=a26_0x431298;for(const _0x3d5156 in _0xe0a51e[_0x4d0c6e(0x160)]){_0xe0a51e[_0x4d0c6e(0x160)][_0x3d5156][_0x4d0c6e(0x18d)]&&_0xe0a51e[_0x4d0c6e(0x160)][_0x3d5156]['Properties'][_0x4d0c6e(0x17c)]&&_0xe0a51e[_0x4d0c6e(0x160)][_0x3d5156]['Properties'][_0x4d0c6e(0x17c)][_0x4d0c6e(0x16b)](..._0x2e9118);}};exports[a26_0x431298(0x170)]=async _0x3ae160=>{const _0x3f2b91=a26_0x431298,_0x1d48df={'QunCV':_0x3f2b91(0x174),'YVNlb':_0x3f2b91(0x164),'wtEJw':_0x3f2b91(0x16c),'JpEYk':'templates','YrfUW':_0x3f2b91(0x159),'ewVsK':_0x3f2b91(0x179),'Bquyd':function(_0x739141,_0x5927bf,_0x179137,_0x375284){return _0x739141(_0x5927bf,_0x179137,_0x375284);},'fnzLQ':_0x3f2b91(0x182),'cZuzc':_0x3f2b91(0x177),'Vkigw':'CAPABILITY_NAMED_IAM','GIjjv':_0x3f2b91(0x181),'asMMf':_0x3f2b91(0x15a)},_0x343aaa=COMMON_HST_TAGS,_0x31687f={};_0x31687f[_0x3f2b91(0x16a)]=_0x1d48df[_0x3f2b91(0x183)],_0x31687f[_0x3f2b91(0x169)]=_0x3ae160,_0x343aaa[_0x3f2b91(0x16b)](_0x31687f),_0x343aaa['push']({'Key':_0x1d48df[_0x3f2b91(0x157)],'Value':new Date()[_0x3f2b91(0x167)]()[_0x3f2b91(0x16d)]()});const _0x569b9a={};_0x569b9a[_0x3f2b91(0x18f)]=_0x1d48df[_0x3f2b91(0x186)];const _0x1cbcf9=new AWS[(_0x3f2b91(0x15f))](_0x569b9a),_0x34f047=await fs[_0x3f2b91(0x17f)](path[_0x3f2b91(0x156)](__dirname,'..',_0x1d48df[_0x3f2b91(0x162)],_0x1d48df[_0x3f2b91(0x188)]),_0x1d48df[_0x3f2b91(0x189)]),_0x1940fa={};_0x1940fa['schema']=CLOUDFORMATION_SCHEMA;const _0x38d482=yaml['load'](_0x34f047,_0x1940fa);_0x1d48df[_0x3f2b91(0x18c)](addAutoscalerTags,_0x38d482,_0x3ae160,_0x343aaa);const _0x1e6fc9=JSON[_0x3f2b91(0x15c)](_0x38d482),_0x1de161={};_0x1de161['StackName']=CLUSTER_AUTOSCALER_STACK_NAME+'-'+_0x3ae160,_0x1de161[_0x3f2b91(0x172)]=_0x1d48df[_0x3f2b91(0x173)],_0x1de161[_0x3f2b91(0x190)]=_0x1e6fc9,_0x1de161[_0x3f2b91(0x166)]=[{'ParameterKey':_0x1d48df[_0x3f2b91(0x18a)],'ParameterValue':_0x3ae160}],_0x1de161[_0x3f2b91(0x165)]=[_0x1d48df[_0x3f2b91(0x175)]],_0x1de161[_0x3f2b91(0x17c)]=_0x343aaa;const _0x4df714=_0x1de161,_0x22d693=await _0x1cbcf9['createStack'](_0x4df714)[_0x3f2b91(0x168)]();logger[_0x3f2b91(0x17a)](_0x1d48df[_0x3f2b91(0x176)]);const _0x514ea5={};return _0x514ea5[_0x3f2b91(0x18e)]=_0x22d693[_0x3f2b91(0x171)],_0x1cbcf9[_0x3f2b91(0x158)](_0x1d48df[_0x3f2b91(0x16f)],_0x514ea5)['promise']();};